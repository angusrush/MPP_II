\documentclass[main.tex]{subfiles}

\begin{document}

\section{Monoidal push-pull of local systems}
\label{sec:the_monoidal_construction}

The classical Grothendieck construction provides an equivalence between functors $\hat{p}\colon \category{D} \to \Cat$ and cartesian fibrations $p\colon \int \hat{p} \to \category{D}\op$. There are many conditions one can impose upon of the functor $\hat{p}$, and many structures one can endow it with; it is natural to wonder whether these properties and structures can be captured in the fibration $p$.

An answer in the case that $F$ is lax monoidal is given in \cite{moeller2018monoidal}. Suppose $p\colon \category{C} \to \category{D}$ is a cartesian fibration of 1-categories which classifies a pseudofunctor $\hat{p}\colon \category{D}\op \to \Cat$. Further suppose the following:
\begin{itemize}
  \item The category $\category{C}$ carries a symmetric monoidal structure $(\otimes, I_{\category{C}}, \ldots)$.

  \item The category $\category{D}$ carries a symmetric monoidal structure $(\boxtimes, I_{\category{D}}, \ldots)$.

  \item The functor $p$ is strong monoidal: for objects $x$, $y \in \category{C}$, we have that $p(x \otimes y) = p(x) \boxtimes p(y)$, and $p(I_{\category{C}}) = I_{\category{D}}$.\footnote{The reason for the strict equality in this condition is that we have chosen specific monoidal functors $\otimes$ and $\boxtimes$, and specific unit objects $I_{\category{C}}$ and $I_{\category{D}}$. Later, we will replace these strict choices by fibrations which give the same data up to coherent homotopy.}

  \item The monoidal product $\otimes$ preserves $p$-cartesian morphisms in the sense that if $f$ and $g$ are $p$-cartesian morphisms, then $f \otimes g$ is also $p$-cartesian.
\end{itemize}
Under these conditions, the pseudofunctor $\hat{p}$ carries a lax monoidal structure $(\category{D}\op, \boxtimes) \to (\Cat, \times)$, described as follows. 
\begin{itemize}
  \item Restricting the tensor product
    \begin{equation*}
      \otimes\colon \category{C} \times \category{C} \to \category{C}
    \end{equation*}
    to the fibers $\category{C}_{d}$ and $\category{C}_{d'}$ of $p$ over $d$ and $d'$ yields the structure maps
    \begin{equation*}
      \hat{p}(d) \times \hat{p}(d') \to \hat{p}(d \boxtimes d').
    \end{equation*}
    That these structure maps form a pseudonatural transformation, i.e.\ that the necessary squares commute up to specified homotopy, follows from the assumption that the monoidal product preserves $p$-cartesian morphisms in each slot.

  \item The requirement that $p(I_{\category{C}}) = I_{\category{D}}$ can be rephrased to say that $I_{\category{D}} \in \hat{p}(I_{\category{C}})$. This gives us the structure map $\ast \to \hat{p}(I_{\category{D}})$, where $\ast$ is the unit object in $\Cat$.
\end{itemize}

If we want to study covariant rather than contravariant pseudofunctors, we should replace cartesian fibrations by cocartesian fibrations; of course, now we must assume that $\otimes$ preserves cocartesian edges rather than cartesian. The rest of the theory remains unchanged. These results also remain true in the $\infty$-categorical case, as we will show in \hyperref[ssc:the_lax_monoidal_grothendieck_construction]{Subsection~\ref*{ssc:the_lax_monoidal_grothendieck_construction}}.

As we saw in the last chapter, if we have a bicartesian fibration subject which satisfies the Beck-Chevalley condition (i.e.\ a Beck-Chevalley fibration), we can combine both cartesian and cocartesian functorialities into pull-push functoriality. Our aim in \hyperref[ssc:monoidal_beck_chevalley_fibrations]{Subsection~\ref*{ssc:monoidal_beck_chevalley_fibrations}} will be to show that the theory of Beck-Chevalley fibrations admits a monoidal generalization. More specifically, we will show the following. Consider a Beck-Chevalley fibration $r\colon \category{X} \to \category{T}$ such that $\category{X}$ carries a symmetric monoidal structure $\otimes$, and $\category{T}$ carries a symmetric monoidal structure $\boxtimes$. Under the assumption that $r$ is strong monoidal, and that $\otimes$ preserves both cartesian and cocartesian edges, the functor
\begin{equation*}
  \Span(\category{T}) \to \ICat
\end{equation*}
constructed in the previous chapter carries a lax monoidal structure. Note that this statement is not entirely original. A similar result in a somewhat different context is proved in \cite{spectralmackeyfunctors2}.

We will then apply our results to local systems. We will show that if $\category{C}$ is a symmetric monoidal $\infty$-category, then the $\infty$-category of $\category{C}$-local systems carries a symmetric monoidal structure, defined on objects by
\begin{equation*}
  (\mathcal{F}\colon X \to \category{C}) \otimes (\mathcal{G}\colon Y \to \category{C}) \quad=\quad X \times Y \overset{\mathcal{F} \times \mathcal{G}}{\to} \category{C} \times \category{C} \overset{\otimes}{\to} \category{C}
\end{equation*}
and that the functor $\LS(\category{C}) \to \S$ is can be given the structure of a monoidal Beck-Chevalley fibration, thus classifying a lax monoidal functor
\begin{equation*}
  (\Span(\S), \tilde{\times}) \to (\ICat, \times).
\end{equation*}

%Like Barwick et al., we will prove a somewhat adapted version of this statement. Note that in the above discussion, we were carrying a conceptual difficulty with us by modelling monoidal categories as tuples, $(\category{C}, \otimes, \dots)$; we have chosen a specific functor $\otimes$, together with specific choices of coherent data surrounding it. It is often preferable to model a symmetric monoidal category as a fibration, leaving these choices unmade, and this is what we will do. As our aim will be to build categories of spans (where we must have good control over pullback squares), we will model our symmetric monoidal categories as cartesian fibrations, rather than the more usual cocartesian fibrations. In \hyperref[ssc:monoidal_beck_chevalley_fibrations]{Subsection~\ref*{ssc:monoidal_beck_chevalley_fibrations}}, we give the basic definitions we will need, culminating in the $\infty$-categorical version of the statement above.

\subsection{The lax monoidal Grothendieck construction}
\label{ssc:the_lax_monoidal_grothendieck_construction}

Our aim in this section is to show an $\infty$-categorical version of the statement that a monoidal cartesian fibration $p\colon (\category{C}, \otimes) \to (\category{D}, \boxtimes)$ such that $\otimes$ preserves $p$-cartesian morphisms straightens to a lax monoidal pseudofunctor $\category{D}\op \to \Cat$. We will assume familiarity with the theory of symmetric monoidal $\infty$-categories as laid out in \cite[Chap.~2]{luriehigheralgebra}; roughly, a symmetric monoidal $\infty$-category is defined to be a cocartesian fibration classifying a commutative monoid in $\ICat$. Our first goal will be to rephrase some of the results there in terms of cartesian fibrations rather than cocartesian fibrations.

\begin{notation}
  We will frequently refer to the following maps in $\Finp\op$.
  \begin{itemize}
    \item Denote by $\rho^{i}\colon \langle n \rangle \to \langle 1 \rangle$ the map in $\Finp$ sending $i \mapsto 1$ and everything else to $\ast$. Denote the same map in $\Finp\op$ by $\rho_{i}$.

    \item Denote by $\mu\colon \langle 2 \rangle \to \langle 1 \rangle$ the active map in $\Finp$. We will denote the same map in $\Finp\op$ also by $\mu$.
  \end{itemize}
\end{notation}

\begin{definition}
  A \defn{CSMC} (contravariantly-presented symmetric monoidal $\infty$-category) is a cartesian fibration $p\colon \category{C}_{\otimes} \to \Finp\op$ such that the contravariant transport maps $\rho_{i}^{*}\colon (\category{C}_{ \otimes})_{\langle n \rangle} \to (\category{C}_{ \otimes})_{\langle 1 \rangle}$ are the canonical projections exhibiting $(\category{C}_{ \otimes})_{\langle n \rangle}$ as an $n$-fold homotopy product.
\end{definition}

\begin{notation}
  For any CSMC $\category{C}_{\otimes} \to \Finp\op$, we will denote the fiber $(\category{C}_{\otimes})_{\langle 1 \rangle}$ simply by $\category{C}$.
\end{notation}

The equivalence $(\category{C}_{\otimes})_{\langle n \rangle} \simeq \category{C}^{n}$ allow us to trade maps into $(\category{C}_{\otimes})_{\langle n \rangle}$ for $n$ maps into $\category{C}$, well-defined up to equivalence. Given a diagram $a\colon K \to (\category{C}_{\otimes})_{\langle n \rangle}$, we will often abuse this terminology by calling any such corresponding diagrams $a_{i}\colon K \to \category{C}$ `the' components of $a$, as long as we are making reference only to properties of these components which are preserved under equivalence.

\begin{definition}
  A \defn{map} between CSMCs $\category{C}_{\otimes} \to \Finp\op$ and $\category{D}_{\boxtimes} \to \Finp\op$ is a functor $r$ making the diagram
  \begin{equation*}
    \begin{tikzcd}
      \category{C}_{\otimes}
      \arrow[rr, "r"]
      \arrow[dr, swap, "q"]
      && \category{D}_{\boxtimes}
      \arrow[dl, "p"]
      \\
      & \Finp\op
    \end{tikzcd}
  \end{equation*}
  commute. Given a map of CSMCs as above, we will further make use of the following terminology.
  \begin{itemize}
    \item The map $r$ is a \defn{monoidal functor} if it sends $q$-cartesian morphisms to $p$-cartesian morphisms.

      \textit{This implies, for example, that $r(x \otimes y) \simeq r(x) \boxtimes r(y)$, and that $r(I_{\category{C}}) \simeq I_{\category{D}}$. It also automatically implies that the diagrams encoding associativity, etc.,\ commute up to coherent homotopy.}

    \item An edge $f$ in $(\category{C}_{\otimes})_{\langle n \rangle}$ is \defn{componentwise cartesian (resp.\ componentwise cocartesian)} if for each $1 \leq i \leq n$, the transport $\rho_{i}^{*}(f)$ is $r|\langle 1 \rangle$-cartesian (resp.\ cocartesian).

      \textit{We can think of a morphism $f$ in $(\category{C}_{\otimes})_{\langle n \rangle}$ as an $n$-tuple of morphisms $f_{i}$ in $\category{C}$. We say that $f$ is componentwise (co)cartesian if each component $f_{i}$ is (co)cartesian as an edge of the underlying fibration $\category{C} \to \category{D}$.}

    \item The tensor product $\otimes$ \defn{preserves cartesian (resp.\ cocartesian) edges} if for all $\phi\colon \langle n \rangle \leftarrow \langle m \rangle \in \Finp\op$, the associated functor $\phi^{*}\colon (\category{C}_{\otimes})_{\langle m \rangle} \to (\category{C}_{\otimes})_{\langle n \rangle}$ sends componentwise cartesian (resp.\ componentwise cocartesian) morphisms contained in the fiber $(\category{C})_{\langle m \rangle}$ to componentwise cartesian (resp.\ componentwise cocartesian) morphisms contained in the fiber $(\category{C}_{\otimes})_{\langle n \rangle}$.

      \textit{We will show below that this is equivalent to demanding that if morphisms $f$ and $g$ in $\category{C}$ are $r|\langle 1 \rangle$-(co)cartesian, then $f \otimes g$ is as well.}

    \item The CSMC $q\colon \category{C}_{\otimes} \to \Finp\op$ is \defn{cartesian-compatible (resp.\ cocartesian-compatible)} an edge $f$ in the fiber $(\category{C}_{\otimes})_{\langle n \rangle}$ is $r$-cartesian (resp.\ cocartesian) if and only if it is componentwise cartesian.

      \textit{This is a technical condition which is true for all CSMCs which we will consider; it says that the way we encode the monoidal structure on $\category{C}$ into a cartesian fibration is well-behaved with respect to the fibration $r$.}
  \end{itemize}
\end{definition}

\begin{lemma}
  \label{lemma:co_cartesian_preservation_determined_by_bifunctor}
  Let
  \begin{equation*}
    \begin{tikzcd}
      \category{C}_{\otimes}
      \arrow[rr, "r"]
      \arrow[dr, swap, "q"]
      && \category{D}_{\boxtimes}
      \arrow[dl, "p"]
      \\
      & \Finp\op
    \end{tikzcd}
  \end{equation*}
  be a map between CSMCs. The tensor product $\otimes$ preserves cartesian (resp.\ cocartesian) morphisms if and only if for all $r|\langle 1 \rangle$-cartesian (resp.\ $r|\langle 1 \rangle$-cocartesian) morphisms $f$ and $g$ in $\category{C}$, the morphism $f \otimes g$ is also $r|\langle 1 \rangle$-cartesian (resp.\ $r|\langle 1 \rangle$-cocartesian).
\end{lemma}
\begin{proof}
  We consider the cartesian case. The cocartesian case is identical.

  Suppose that $\otimes$ preserves $r$-cartesian morphisms, and let $f$ and $g$ be $r|\langle 1 \rangle$-cartesian morphisms in $\category{C}$. Then there is a morphism $[f, g]$ in $( \category{C}_{\otimes} )_{\langle 2 \rangle}$ with components $f$ and $g$. Taking $\phi$ to be the active map $\langle 2 \rangle \to \langle 1 \rangle$ shows that $f \otimes g$ is $r|\langle 1 \rangle$-cartesian.

  Now suppose that for any $r|\langle 1 \rangle$-cartesian morphisms $f$ and $g$, the morphism $f \otimes g = \phi^{*}([f, g])$ in $\category{C}$ is $r|\langle 1 \rangle$-cartesian. By associativity of the tensor product and induction, we have that the $n$-ary product of $r|\langle 1 \rangle$-cartesian morphisms is again $r|\langle 1 \rangle$-cartesian for $n \geq 2$. The image of the map $\alpha^{*}$, for $\alpha\colon \langle 0 \rangle \to \langle 1 \rangle$, i.e.\ the 0-ary tensor product, is equivalent to $\id_{I}$, where $I$ is the unit object of $\category{C}$, and is thus an equivalence, hence also $r|\langle 1 \rangle$-cartesian.

  Now let $\psi\colon \langle m \rangle \to \langle n \rangle$ be a general map in $\Finp$, and let $f = [f_{1}, \ldots, f_{m}]$ be a componentwise cartesian map. The $i$th component of $\psi^{*}(f)$ is given by $\bigotimes_{\psi(j) = i} f_{j}$, which is $r|\langle 1 \rangle$-cartesian no matter the cardinality of $\psi^{-1}(i)$. Thus, $\psi^{*}(f)$ is $r$-cartesian.
\end{proof}

%\begin{lemma}
%  \label{lemma:right_horn_smash_delta_1}
%  The inclusion of marked simplicial sets
%  \begin{equation}
%    \label{eq:right_horn_anodyne_morphism}
%    \left( \Delta^{n} \times \Delta^{\{0\}} \coprod_{\Lambda^{n}_{n} \times \Delta^{\{0\}}} \Lambda^{n}_{n} \times \Delta^{\{0\}}, \mathcal{E} \right) \hookrightarrow (\Delta^{n} \times \Delta^{1}, \mathcal{F})
%  \end{equation}
%  where the marking $\mathcal{F}$ is the flat marking together with the edge $\Delta^{\{0\}} \times \Delta^{1}$, and $\mathcal{E}$ is the restriction of this marking, is marked (cocartesian) anodyne.
%\end{lemma}
%\begin{proof}
%  We can write the inclusion $\Lambda^{n}_{n} \hookrightarrow \Delta^{n}$ as a composition $\Lambda^{n}_{n} \hookrightarrow \partial \Delta^{n} \hookrightarrow \Delta^{n}$, where first morphism is a pushout along $\partial \Delta^{n-1} \hookrightarrow \Delta^{n-1}$. This factorization allows us to apply \hyperref[lemma:right_horn_smash_delta_1]{Lemma~\ref*{lemma:right_horn_smash_delta_1}} twice.
%\end{proof}

\begin{lemma}
  \label{lemma:equivalent_conditions_to_be_cartesan}
  Let $q\colon \category{C}_{\otimes} \to \Fin\op$ and $p\colon \category{D}_{\otimes} \to \Finp\op$ be CSMCs, and let $r$ be an inner fibration $\category{C}_{\otimes} \to \category{D}_{\boxtimes}$ such that the diagram
  \begin{equation*}
    \begin{tikzcd}
      \category{C}_{\otimes}
      \arrow[rr, "r"]
      \arrow[dr, swap, "q"]
      && \category{D}_{\boxtimes}
      \arrow[dl, "p"]
      \\
      & \Finp\op
    \end{tikzcd}
  \end{equation*}
  commutes. Then the following are equivalent.
  \begin{enumerate}
    \item The map $r$ is a cartesian fibration.

    \item The map $r$ has the following properties.
      \begin{enumerate}
        \item The restriction $r|\langle 1 \rangle$ is a cartesian fibration.

        \item The map $r$ is a monoidal functor.

        \item The tensor product $\otimes$ preserves cartesian edges.

        \item The CSMC $q$ is cartesian-compatible.
      \end{enumerate}
  \end{enumerate}
\end{lemma}
\begin{proof}
  Suppose that 1.\ holds, i.e.\ that $r$ is a cartesian fibration. Then a) holds: $r|\langle 1 \rangle$ is a cartesian fibration because the pullback of a cartesian fibration is again a cartesian fibration.

  We now show that b) holds, i.e.\ that the map $r$ sends $q$-cartesian morphisms to $p$-cartesian morphisms. To this end, let $f\colon c \to c' \in \category{C}_{\otimes}$ be a $q$-cartesian morphism, and consider the image $p(f)\colon r(c) \to r(c')$ in $\category{D}_{\otimes}$. Let $g\colon \tilde{d} \to r(c')$ be a $p$-cartesian lift of $q(f) \in \Finp\op$, and $\hat{g}\colon \hat{d} \to c'$ a $r$-cartesian lift of $g$. By \cite[Prop.~2.4.1.3]{highertopostheory}, $\hat{g}$ is a $q$-cartesian lift of $q(f)$, so $f$ and $\hat{g}$ are equivalent as morphisms in $\category{C}_{\otimes}$. Thus $r(f)$ and $g$ are equivalent as morphisms in $\category{D}_{\otimes}$, so $r(f)$ is $p$-cartesian since $g$ is. This proves b).

  We now show that d) holds. We do this in two steps. First, we show that if some morphism $f$ in $(\category{C}_{\otimes})_{\langle n \rangle}$ is $r$-cartesian, then for all $\phi\colon \langle n \rangle \to \langle m \rangle$, the morphism $\phi^{*}(f)$ is $r$-cartesian. This follows from the fact that for a square in $\category{C}_{\otimes}$
  \begin{equation*}
    \begin{tikzcd}
      c_{0}'
      \arrow[r, "\phi^{*}(f)"]
      \arrow[d, swap, "u"]
      & c_{1}'
      \arrow[d, "v"]
      \\
      c_{0}
      \arrow[r, "f"]
      & c_{1}
    \end{tikzcd}
  \end{equation*}
  in which $u$ and $v$ are $q$-cartesian (and hence $r$-cartesian) and $f$ is $r$-cartesian, $\phi^{*}(f)$ is also $r$-cartesian. Applying this result to the inert maps $\rho^{i}\colon \langle n \rangle \to \langle 1 \rangle$ implies that if a morphism $f$ in $(\category{C}_{\otimes})_{\langle n \rangle}$ is $r$-cartesian, then the components $f_{i}$ are $r$-cartesian, hence also $r|\langle 1 \rangle$-cartesian. This is one direction of d).

  We now show the other direction of d): if a morphism in $(\category{C}_{\otimes})_{\langle n \rangle}$ is componentwise cartesian, then it is $r$-cartesian. To see this, let $f_{i}$ be $r|\langle 1 \rangle$-cartesian morphisms, $1 \leq i \leq n$. We can find a morphism $f \in (\category{C}_{\otimes})_{\langle n \rangle}$ with components $f_{i}$. We would like to show that $f$ is $r$-cartesian. To this end, consider the morphisms $r(f_{i}) = \overline{f}_{i}$. We can find a morphism $\overline{f}$ in $(\category{D}_{\boxtimes})_{\langle n \rangle}$ with components $\overline{f}_{i}$, and can take a $r$-cartesian lift $\hat{f}$ of $\overline{f}$. The components of $\hat{f}$ are equivalent to the $f_{i}$, and are hence $r$-cartesian. But then $f$ is equivalent to $\hat{f}$, so $f$ is $r$-cartesian as promised. This proves d).

  We have now shown that under the assumption that 1.\ holds, a the pushforward maps preserve $r$-cartesian morphisms. This, together with d), proves c).

  Now, suppose that 2.\ holds. We immediately note that c) implies that for each $\langle n \rangle \in \Finp\op$, the restriction $r|\langle n \rangle$ is a cartesian fibration, and an edge is $r|\langle n \rangle$-cartesian if and only if it is $r$-cartesian.

  We now show that $r$ admits cartesian lifts. Let $f\colon d \to d'$ be an edge in $\category{D}_{\boxtimes}$ lying over an edge $\phi\colon \langle n \rangle \leftarrow \langle m \rangle$ in $\Finp\op$, and let $c'$ be a lift of $d'$ to $\category{C}_{\otimes}$. We can take a $q$-cartesian lift $g\colon c'' \to c$ of $f$, whose image in $\category{D}_{\boxtimes}$ is by b) a $p$-cartesian map $h\colon d'' \to d'$. This gives us the solid data
  \begin{equation*}
    \begin{tikzcd}
      & c''
      \arrow[dr, "g"]
      \\
      c
      \arrow[ur, dashed, "k"]
      \arrow[rr, dashed, swap, "\ell"]
      && c'
    \end{tikzcd}
    \qquad\text{in }\category{C}_{\otimes},
  \end{equation*}
  \begin{equation*}
    \begin{tikzcd}
      & d''
      \arrow[dr, "h"]
      \\
      d
      \arrow[ur, dashed, "j"]
      \arrow[rr, swap, "f"]
      && d'
    \end{tikzcd}
    \qquad\text{in }\category{D}_{\boxtimes}
  \end{equation*}
  \begin{equation*}
    \begin{tikzcd}
      & \langle n \rangle
      \arrow[dl, equals]
      \\
      \langle n \rangle
      && \langle m \rangle
      \arrow[ul, swap, "\phi"]
      \arrow[ll, "\phi"]
    \end{tikzcd}.
    \qquad\text{in }\Finp\op.
  \end{equation*}
  Using the fact that $h$ is $p$-cartesian, we can fill the $2$-simplex in $\category{D}_{\boxtimes}$, giving us in particular a map $j\colon d \to d''$. We can lift $j$ to an $r|\langle n \rangle$-cartesian morphism $k\colon c \to c''$, which is therefore also $r$-cartesian. Using that $r$ is an inner fibration, we can compose $g$ and $k$ relative to the simplex in $\category{D}_{\boxtimes}$, giving us a lift $\ell$ of $f$. But $\ell$ is the composition of two $r$-cartesian morphisms, and hence itself $r$-cartesian.
\end{proof}

\begin{note}
  \hyperref[lemma:equivalent_conditions_to_be_cartesan]{Lemma~\ref*{lemma:equivalent_conditions_to_be_cartesan}} gives us an $\infty$-categorical version of the monoidal Grothendieck construction of \cite{moeller2018monoidal} discussed at the begininning of this section. There, a monoidal structure is modelled as tuple $(\category{C}, \otimes, \dots)$. Because of the specific choice of a bifunctor $\otimes$ and the surrounding corresponding coherence data, strong conditions must be placed on the functor $r$: it must be monoidal `on the nose.' Here, we model our monoidal structure as a cartesian fibration, leaving these choices unmade. The strong notion of monoidality is thus replaced by the usual one.

  The connection between the above result and the monoidal Grothendieck construction, somewhat explicitly, is as follows. \hyperref[lemma:equivalent_conditions_to_be_cartesan]{Lemma~\ref*{lemma:equivalent_conditions_to_be_cartesan}} tells us that the data of a functor $(\category{C}, \otimes) \to (\category{D}, \boxtimes)$ satisfying conditions analogous to those given in \cite{moeller2018monoidal} is equivalent to a cartesian fibration between the corresponding CSMCs. A cartesian fibration $r$ between CSMCs $p\colon \category{C}_{\otimes} \to \Finp\op$ and $q\colon \category{D}_{\boxtimes} \to \Finp\op$ as above straightens to a $\category{D}_{\boxtimes}\op$-monoid in $\ICat$. But a $\category{D}_{\boxtimes}\op$-monoid in $\ICat$ can be essentially uniquely extended to an $\category{D}_{\boxtimes}\op$-algebra object in $\ICatCart$ \cite[Prop~2.4.2.4--2.4.2.6]{luriehigheralgebra}, which is to say, a lax monoidal functor $(\category{D}\op, \boxtimes) \to (\ICat, \times)$.
\end{note}

In the remainder of this section, we study a special type of CSMC, those whose tensor product is given by the cartesian product.

\begin{definition}
  A \defn{CSMC} $p\colon \category{D}_{\boxtimes} \to \Finp\op$ is \defn{cartesian} if the unit object $\ast$ is final, and if for all objects $X$ and $Y$ in $\category{D}$, the canonical maps $X \times \ast \leftarrow X \boxtimes Y \to \ast \times Y$ exhibit $X \boxtimes Y$ as the product of $X$ and $Y$.
\end{definition}

\begin{example}
  Let $\category{T}$ be a category with finite products. Then $\category{T}\op$ admits finite coproducts, and we can consider the cocartesian monoidal structure
  \begin{equation*}
    (\category{T}\op)^{\amalg} \to \Finp
  \end{equation*}
  of \cite[Construction~2.4.3.1]{luriehigheralgebra}. Taking the opposite of this functor gives us a cartesian fibration
  \begin{equation*}
    \category{T}_{\times} \to \Finp\op.
  \end{equation*}
  That this is a cartesian CSMC follows immediately from the fact that $(\category{T}\op)^{\amalg} \to \Finp$ is a cocartesian symmetric monoidal category.
\end{example}


In any category $\category{T}$ with pullbacks, one can form a category $\Span(\category{T})$ of spans in $\category{T}$. If $\category{T}$ also has a terminal object, hence all finite limits (including, of course, finite products), then the category of spans inherits a monoidal structure via
\begin{equation*}
  \left(
  \begin{tikzcd}[row sep=small, column sep=small]
    & Z
    \arrow[dl]
    \arrow[dr]
    \\
    X
    && Y
  \end{tikzcd}
  \right) \otimes \left(
  \begin{tikzcd}[row sep=small, column sep=small]
    & Z'
    \arrow[dl]
    \arrow[dr]
    \\
    X'
    && Y'
  \end{tikzcd}
  \right) \quad =
  \begin{tikzcd}[row sep=small, column sep=small]
    & Z \times Z'
    \arrow[dl]
    \arrow[dr]
    \\
    X \times X'
    && Y \times Y'
  \end{tikzcd}
\end{equation*}

We now construct the monoidal structure on this category of spans explicitly, starting from any cartesian CSMC $\category{T}_{\times} \to \Finp\op$.

\begin{proposition}
  \label{prop:cartesian_CSMC_always_exists}
  Suppose $\category{T}_{\times} \to \Finp\op$ is a cartesian CSMC whose underlying category $\category{T}$ admits pullbacks. Then there exists a (cocartesian-presented) symmetric monoidal category $\Span(\category{T})^{\times} \to \Finp$.
\end{proposition}
\begin{proof}
  We upgrade this functor to a functor of triples. We will consider the following triples.
  \begin{itemize}
    \item We define a triple structure $\triple{F}$ on $\Finp\op$, where
      \begin{itemize}
        \item $\category{F} = \Finp\op$

        \item $\category{F}\downdag = (\Finp\op)^{\simeq}$

        \item $\category{F}\updag = \Finp\op$
      \end{itemize}
      This is obviously adequate.

    \item We define a triple $\triple{T}$ as follows.
      \begin{itemize}
        \item $\category{T} = \category{T}_{\times}$

        \item $\category{T}\downdag = \category{T}_{\times} \times_{\Finp\op}(\Finp\op)^{\simeq}$

        \item $\category{T}\updag = \category{T}_{\times}$
      \end{itemize}
  \end{itemize}

  To see that this is adequate, we first note that $p$ admits relative pullbacks. To see this, note that each fiber admits pullbacks by virtue our assumption that $\category{T}$ admits pullbacks, and the identifications $( \category{T}_{\times} )_{\langle n \rangle} \simeq \category{T}^{n}$. The functoriality coming from $p$ implements products, and therefore commute with pullbacks. Thus, $\category{T}_{\times}$ admits pullbacks, and $p$ preserves pullbacks. This immediately implies that $\triple{T}$ is adequate:
  \begin{enumerate}
    \item Pullbacks of this form are simply squares with horizontal morphisms given by equivalences.

    \item Any pullback square lies over a pullback square in $\Finp\op$, so this reduces to the lemma about cartesian morphisms.
  \end{enumerate}

  We thus consider the map of triples
  \begin{equation*}
    \pi\colon \triple{T} \to \triple{F}.
  \end{equation*}

  One readily checks that $\pi$ satisfies the conditions of \hyperref[thm:old_barwick]{Theorem~\ref*{thm:old_barwick}}:
  \begin{itemize}
    \item The first condition holds because cocartesian morphisms lying over equivalences are themselves equivalences, hence also cartesian, so we can solve the relevant lifting problems using cartesian lifts.

    \item The second condition holds because a square whose bottom-horizontal morphism is an equivalence is pullback if and only if its top-horizontal morphism is an equivalence.
  \end{itemize}

  This gives us a functor $\Span\triple{T} \to \Span\triple{F}$. Pulling back along the equivalence $\Finp \to \Span\triple{F}$ gives us the cocartesian fibration functor $\Span(\category{T})^{\times} \to \Finp$. It remains only to check that the maps $\rho^{i}_{*}\colon \Span(\category{T})^{\times}_{\langle n \rangle} \to \Span(\category{T})^{\times}_{\langle 1 \rangle}$ are the canonical projections exhibiting
  \begin{equation*}
    \Span(\category{T})^{\times}_{\langle n \rangle} \simeq \left( \Span(\category{T})^{\times}_{\langle 1 \rangle} \right)^{n}.
  \end{equation*}

  In order to show this, we should show that for each simplicial set $K$, the map $a$ in the diagram
  \begin{equation*}
    \begin{tikzcd}
      \Fun(K, \Span(\category{T})^{\times}_{\langle n \rangle})
      \arrow[r, "a"]
      \arrow[d, swap, "\simeq"]
      & \prod_{i = 1}^{n} \Fun(K, \Span(\category{T})^{\times}_{\langle 1 \rangle})
      \arrow[d, "\simeq"]
      \\
      \Fun^{\aCart}(\sd(K), (\category{T}_{\times})_{\langle n \rangle}) \arrow[r, "b"]
      \arrow[d, hook, "i"{swap}]
      & \prod_{i = 1}^{n} \Fun^{\aCart}(\sd(K), (\category{T}_{\times})_{\langle 1 \rangle})
      \arrow[d, hook, "j"]
      \\
      \Fun(\sd(K), (\category{T}_{\times})_{\langle n \rangle}) \arrow[r, "c", "\simeq"{swap}]
      & \prod_{i = 1}^{n} \Fun(\sd(K), (\category{T}_{\times})_{\langle 1 \rangle})
    \end{tikzcd}
  \end{equation*}
  is an isomorphism in the category $\h \Kan$. In order to show this, it suffices to show that the map $b$ is an isomorphism in $\h \Kan$. We note that the morphisms $i$ and $j$ are inclusions of connected components, and the map $c$ is an isomorphism because $\category{T}_{\times} \to \Finp\op$ is a CSMC, so in order to show that $b$ is an isomorphism in $\h\Kan$, it suffices to show that it is essentially surjective. This follows from the fact that a square in $(\category{T}_{\times})_{\langle n \rangle} \simeq ((\category{T}_{\times})_{\langle 1 \rangle})^{n}$ is pullback if and only if each component is pullback.
\end{proof}


\subsection{Monoidal Beck-Chevalley fibrations}
\label{ssc:monoidal_beck_chevalley_fibrations}

{\color{red}\begin{note}
  For this to work out, I think we probably need to modify the second condition to be an adequate triple so that we only need to consider pullbacks of the type given in the first condition, i.e:

  For any pullback square
  \begin{equation*}
    \begin{tikzcd}
      y'
      \arrow[r,  "f'"]
      \arrow[d, swap, "g'"]
      & x'
      \arrow[d, "g"]
      \\
      y
      \arrow[r, "f"]
      & x
    \end{tikzcd}
  \end{equation*}
  where $f \in \category{C}\downdag$ and $g \in \category{C}\updag$, we have that $f' \in \category{C}\downdag$ and $g' \in \category{C}\updag$.

  This means we also need to add the condition:

  For any square
  \begin{equation*}
    \begin{tikzcd}
      y'
      \arrow[r,  "f'"]
      \arrow[d, swap, "g'"]
      & x'
      \arrow[d, "g"]
      \\
      y
      \arrow[r, "f"]
      & x
    \end{tikzcd}
  \end{equation*}
  where $g$ and $g'$ are equivalences, if $f \in \category{C}\downdag$  (resp.\ $\category{C}\updag$), then $f' \in \category{C}\downdag$ (resp.\ $\category{C}\updag$). Wait, no, we don't. The subcategories $\category{C}\downdag$ and $\category{C}\updag$ contain all equivalences by assumption. Barwick, why would you make your conditions like this?
\end{note}}

In this section, we combine several results from earlier sections.

\begin{itemize}
  \item In \hyperref[sec:the_non_monoidal_construction]{Section~\ref*{sec:the_non_monoidal_construction}}, we showed that a bicartesian fibration $p\colon \category{X} \to \category{T}$ satisfying the Beck-Chevalley condition allows us to combine the functoriality $\category{T} \to \ICat$ and $\category{T}\op \to \ICat$ into push-pull functoriality $\Span(\category{T}) \to \ICat$. We called such bicartesian fibrations \emph{Beck-Chevalley fibrations.}

  \item In \hyperref[ssc:the_lax_monoidal_grothendieck_construction]{Subsection~\ref*{ssc:the_lax_monoidal_grothendieck_construction}} we showed that a cartesian fibration $p\colon \category{C} \to \category{D}$ between monoidal categories whose tensor products were subject to certain compatibility conditions classifies a lax monoidal functor $\category{D}\op \to \ICat$; and dually, that a cocartesian fibration $p$ satisfying dual compatibility conditions classifies a lax monoidal functor $\category{D} \to \ICat$.
\end{itemize}

We will now show that a Beck-Chevalley fibration $p\colon \category{X} \to \category{T}$ between monoidal categories whose tensor products satisfy appropriate compatibility conditions classifies a lax monoidal functor $\Span(\category{T}) \to \ICat$. We will call such fibrations \emph{monoidal Beck-Chevalley fibrations.}

\begin{lemma}
  \label{lemma:cocartesian_iff_componentwise_cocartesian}
  Let $p$ and $q$ be CSMCs as below. Then for any monoidal functor $r$, the CSMC $q$ is cocartesian-compatible.
  \begin{equation*}
    \begin{tikzcd}
      \category{C}_{\otimes}
      \arrow[rr, "r"]
      \arrow[dr, swap, "q"]
      && \category{D}_{\boxtimes}
      \arrow[dl, "p"]
      \\
      & \Finp\op
    \end{tikzcd}
  \end{equation*}
\end{lemma}
\begin{proof}
  We need to show that $f$ in $(\category{C}_{\otimes})_{\langle n \rangle}$ is $r$-cocartesian if and only if it is componentwise cocartesian. Consider the following diagram of pullback squares.
  \begin{equation*}
    \begin{tikzcd}
      (\category{C}_{\otimes})_{\langle n \rangle}
      \arrow[r]
      \arrow[d, swap, "r|\langle n \rangle"]
      & \category{C}_{\otimes}
      \arrow[d, "r"]
      \\
      (\category{D}_{\otimes})_{\langle n \rangle}
      \arrow[r]
      \arrow[d, swap, "p|\langle n \rangle"]
      & \category{D}_{\otimes}
      \arrow[d, "p"]
      \\
      \{\langle n \rangle\}
      \arrow[r]
      & \Finp\op
    \end{tikzcd}
  \end{equation*}
  It follows from the dual to \cite[Cor.~4.3.1.15]{highertopostheory}\footnote{Note an unfortunate notational clash: our maps $p$, $q$, and $r$ do not agree with Lurie's.} that a morphism in $(\category{C}_{\otimes})_{\langle n \rangle}$ is $r|\langle n \rangle$-cocartesian if and only if its image in $\category{C}_{\otimes}$ is $r$-cocartesian. But a morphism is $r|\langle n \rangle$-cocartesian if and only if each component is $r|\langle 1 \rangle$-cocartesian.
\end{proof}

\begin{definition}
  \label{def:monoidal_beck_chevalley_fibration}
  A \defn{monoidal Beck-Chevalley fibration} is a functor $r$ of CSMCs
  \begin{equation*}
    \begin{tikzcd}
      \category{X}_{\otimes}
      \arrow[rr, "r"]
      \arrow[dr, swap, "q"]
      && \category{T}_{\times}
      \arrow[dl, "p"]
      \\
      & \Finp\op
    \end{tikzcd},
  \end{equation*}
  where $\category{T}_{\times}$ is a cartesian CSMC and $\category{X}_{\otimes}$ is cartesian-compatible, with the following characteristics.
  \begin{enumerate}
    \item[(M1)] The map $r|\langle 1 \rangle$ is a Beck-Chevalley fibration.

    \item[(M2)] The map $r$ is monoidal.

    \item[(M3)] The tensor product $\otimes$ preserves $r$-cartesian morphisms.

    \item[(M4)] The tensor product $\otimes$ preserves $r$-cocartesian morphisms.

    \item[(M5)] The CSMC $q$ is cartesian-compatible.\footnote{By \hyperref[lemma:cocartesian_iff_componentwise_cocartesian]{Lemma~\ref*{lemma:cocartesian_iff_componentwise_cocartesian}}, $q$ is automatically cocartesian-compatible, so we needn't add this as a separate condition.}

    %\item The map $p$ is a cartesian CSMC.

    %\item The category $\category{T}$ underlying $\category{T}_{\times}$ admits pullbacks.

    %\item The map $q$ is a CSMC.

    %\item The map $r$ is a cartesian fibration (hence monoidal).

    %\item The functor $r|\langle 1 \rangle$ is a cocartesian fibration.

    %\item The functor $r$ obeys the following interchange law: for any diagram
    %  \begin{equation*}
    %    \begin{tikzcd}
    %      \vec{z}
    %      \arrow[r, "f'"]
    %      \arrow[d, swap, "g'"]
    %      & \vec{y}
    %      \arrow[d, "g"]
    %      \\
    %      \vec{y}'
    %      \arrow[r, "f"]
    %      & \vec{x}
    %    \end{tikzcd}
    %  \end{equation*}
    %  in $\category{X}_{\otimes}$ whose image in $\category{T}_{\otimes}$ is pullback, and which lies over a square
    %  \begin{equation*}
    %    \begin{tikzcd}
    %      \langle n \rangle
    %      & \langle n \rangle
    %      \arrow[l, equals]
    %      \\
    %      \langle m \rangle
    %      \arrow[u, "\phi"]
    %      & \langle m \rangle
    %      \arrow[l, equals]
    %      \arrow[u, swap, "\psi"]
    %    \end{tikzcd},
    %  \end{equation*}
    %  in $\Finp\op$, if $g$ and $g'$ are $r$-cartesian and $f$ is $r$-cocartesian, then $f'$ is $r$-cocartesian.
  \end{enumerate}
\end{definition}

The above conditions are to do only with the properties of the functor $r|\langle 1 \rangle$, together with properties of the tensor product $\otimes$; the only exception is (M5), which is a compatibility condition with how the monoidal structure is encoded as a cartesian fibration. We can also express these properties in terms directly in terms of the fibrations $p$, $q$, and $r$.
\begin{lemma}
  \label{lemma:equivalent_conditions_beck_chevalley_fibration}
  Consider a functor $r$ of CSMCs, where $\category{T}_{\times}$ is a cartesian CSMC.
  \begin{equation*}
    \begin{tikzcd}
      \category{X}_{\otimes}
      \arrow[rr, "r"]
      \arrow[dr, swap, "q"]
      && \category{T}_{\times}
      \arrow[dl, "p"]
      \\
      & \Finp\op
    \end{tikzcd}
  \end{equation*}
  The following are equivalent.
  \begin{enumerate}
    \item The map $r$ is a monoidal Beck-Chevalley fibration.

    \item The map $r$ has the following properties.
      \begin{enumerate}
        \item The category $\category{T}$ underlying $\category{T}_{\times}$ admits pullbacks.

        \item The map $r$ is a cartesian fibration.

        \item The functor $r|\langle 1 \rangle$ is a cocartesian fibration.

        \item The functor $r$ obeys the following interchange law: for any diagram
          \begin{equation}
            \label{eq:diagram_in_total_space_interchange_law}
            \begin{tikzcd}
              \vec{z}
              \arrow[r, "f'"]
              \arrow[d, swap, "g'"]
              & \vec{y}
              \arrow[d, "g"]
              \\
              \vec{y}'
              \arrow[r, "f"]
              & \vec{x}
            \end{tikzcd}
          \end{equation}
          in $\category{X}_{\otimes}$ whose image in $\category{T}_{\boxtimes}$ is pullback, and which lies over a square
          \begin{equation}
            \label{eq:diagram_in_base_space_interchange_law}
            \begin{tikzcd}
              \langle n \rangle
              & \langle n \rangle
              \arrow[l, "\alpha"{above}, "\simeq"{below}]
              \\
              \langle m \rangle
              \arrow[u, "\phi"]
              & \langle m \rangle
              \arrow[l, "\beta"{above}, "\simeq"{below}]
              \arrow[u, swap, "\psi"]
            \end{tikzcd},
          \end{equation}
          in $\Finp\op$ such that $\alpha$ and $\beta$ are equivalences, if $g$ and $g'$ are $r$-cartesian and $f$ is $r$-cocartesian, then $f'$ is $r$-cocartesian.
      \end{enumerate}
  \end{enumerate}
\end{lemma}
\begin{proof}
  That 1.\ implies a) and c) is clear, and b) follows from \hyperref[lemma:equivalent_conditions_to_be_cartesan]{Lemma~\ref*{lemma:equivalent_conditions_to_be_cartesan}}.

  We now show 1.\ implies d). Consider the diagram
  \begin{equation*}
    \begin{tikzcd}
      \langle n \rangle
      \arrow[rr, equals]
      \arrow[dd, equals]
      \arrow[dr, equals]
      && \langle n \rangle
      \arrow[dd, equals]
      \arrow[dr, leftarrow, "\alpha"]
      \\
      & \langle n \rangle
      \arrow[rr, leftarrow, crossing over, near end, "\alpha"]
      && \langle n \rangle
      \arrow[dd, leftarrow, "\psi"]
      \\
      \langle n \rangle
      \arrow[rr, equals]
      \arrow[dr, leftarrow, swap, "\phi"]
      && \langle n \rangle
      \arrow[dr, leftarrow, "\phi \circ \beta"]
      \\
      & \langle m \rangle
      \arrow[uu, near start, crossing over, swap, "\phi"]
      \arrow[rr, leftarrow, "\beta"]
      && \langle m \rangle
    \end{tikzcd}
    \qquad \text{in }\Finp\op,
  \end{equation*}
  which we should think of as a natural transformation from \hyperref[eq:diagram_in_base_space_interchange_law]{Diagram~\ref*{eq:diagram_in_base_space_interchange_law}} to a constant diagram.

  Beginning with the solid diagram below coming from \hyperref[eq:diagram_in_total_space_interchange_law]{Diagram~\ref*{eq:diagram_in_total_space_interchange_law}}, we can find $q$-cartesian lifts of the diagonal arrows. Filling we find a dashed cube
  \begin{equation*}
    \begin{tikzcd}
      \vec{u}
      \arrow[rr, dashed, "h'"]
      \arrow[dd, dashed]
      \arrow[dr, dashed, "\simeq"]
      && \vec{v}
      \arrow[dd, dashed]
      \arrow[dr, dashed, "\simeq"]
      \\
      & \vec{x}
      \arrow[rr, crossing over, near end, "f'"]
      && \vec{y}
      \arrow[dd]
      \\
      \vec{v}'
      \arrow[rr, dashed, "h", near start]
      \arrow[dr, dashed]
      && \vec{w}
      \arrow[dr, dashed]
      \\
      & \vec{y}'
      \arrow[uu, near start, crossing over, leftarrow]
      \arrow[rr, "f"]
      && \vec{z}
    \end{tikzcd}
    \qquad \text{in }\category{X}_{\otimes}
  \end{equation*}
  lying over the cube in $\Finp\op$, whose diagonal arrows are $q$-cartesian, and with equivalences as marked. Mapping this cube down to $\category{T}_{\times}$, we find a cube
  \begin{equation*}
    \begin{tikzcd}
      r(\vec{u})
      \arrow[rr, dashed]
      \arrow[dd, dashed]
      \arrow[dr, dashed, "\simeq"]
      && r(\vec{v})
      \arrow[dd, dashed]
      \arrow[dr, dashed, "\simeq"]
      \\
      & r(\vec{x})
      \arrow[rr, crossing over, near end]
      && r(\vec{y})
      \arrow[dd]
      \\
      r(\vec{v}')
      \arrow[rr, dashed]
      \arrow[dr, dashed]
      && r(\vec{w})
      \arrow[dr, dashed]
      \\
      & r(\vec{y}')
      \arrow[uu, near start, crossing over, leftarrow]
      \arrow[rr]
      && r(\vec{z})
    \end{tikzcd}
    \qquad \text{in }\category{T}_{\times}
  \end{equation*}
  lying over the cube in $\Finp\op$, whose diagonal morphisms are $p$-cartesian, and whose front face is pullback by assumption. The bottom face is pullback since it lies over a pullback square in $\Finp\op$ and the diagonal morphsims are $p$-cartesian, and the top face is pullback because the diagonal morphisms are equivalences. The cube lemma thus implies that the back square is pullback. Note that the back square is entirely contained in the fiber over $\langle n \rangle$, and thus can be thought of as consisting of $n$ component squares in $\category{T}$; by the equivalence $(\category{T}_{\otimes})_{\langle n \rangle} \simeq (\category{T})^{n}$, these component squares are themselves pullback.

  We now return our attention to the diagram in $\category{X}_{\otimes}$. The morphism $f$ is $r$-cocartesian by assumption. That the tensor product $\otimes$ preserves $r$-cocartesian morphisms implies that $h$ is $r$-cocartesian. Applying the Beck-Chevalley condition componentwise to the back face yields that $h'$ is componentwise cocartesian, hence $r$-cocartesian. Since $f'$ is equivalent to $h'$, $f'$ is also $r$-cocartesian. Thus, d) holds.

  We now show that 2.\ implies 1. Restricting each of the conditions of 2.\ to the fibers over $\langle 1 \rangle$ immediately implies that $r|\langle 1 \rangle$ is a Beck-Chevalley fibration, and b) implies that $r$ is monoidal, and that $q$ is cartesian-compatible. It remains to show that the tensor product $\otimes$ preserves $r$-cartesian and $r$-cocartesian morphisms. To this end, consider a square
  \begin{equation*}
    \sigma =
    \begin{tikzcd}
      \vec{x}
      \arrow[r, "f'"]
      \arrow[d, swap, "g'"]
      & \vec{y}
      \arrow[d, "g"]
      \\
      \vec{y}'
      \arrow[r, "f"]
      & \vec{z}
    \end{tikzcd}
    \qquad \text{in } \category{X}_{\otimes}
  \end{equation*}
  such that $g$ and $g'$ are $q$-cartesian, lying over a square
  \begin{equation}
    \begin{tikzcd}
      \langle n \rangle
      & \langle n \rangle
      \arrow[l, equals]
      \\
      \langle m \rangle
      \arrow[u, "\phi"]
      & \langle m \rangle
      \arrow[l, equals]
      \arrow[u, swap, "\phi"]
    \end{tikzcd}
    \qquad \text{in } \Finp\op.
  \end{equation}
  Note that since $r$ is monoidal, the image of $\sigma$ in $\category{T}_{\times}$ is automatically pullback. We now note that if $f$ is $r$-cartesian, then $f'$ is $r$-cartesian by \cite[Prop.~2.4.1.7]{highertopostheory}, and if $f$ is $r$-cocartesian, then $f'$ is $r$-cocartesian (hence $r|\langle 1 \rangle$-cocartesian) by the interchange law.
\end{proof}

%\begin{lemma}
%  The category $\Finp$ admits finite limits and colimits.
%\end{lemma}
%\begin{proof}
%  Denote by $\Fin$ the category of finite sets.
%
%  \begin{itemize}
%    \item A finite diagram $j\colon K^{\triangleleft} \to \Finp$ is a limit diagram if and only if the restriction $j|K$ is a limit diagram.
%
%    \item A diagram $K^{\triangleright} \to \Finp$ is a colimit diagram if and only if the corresponding diagram $\{\ast\} \star (K^{\triangleright}) \to \Fin$ is a colimit diagram.
%  \end{itemize}
%
%  The result then follows from the fact that the category $\Fin$ admits all finite limits and colimits.
%\end{proof}


\begin{proposition}
  For any monoidal Beck-Chevalley fibration, there is a diagram
  \begin{equation*}
    \begin{tikzcd}
      \Span'(\category{X})^{\otimes}
      \arrow[rr, "\rho"]
      \arrow[dr, swap, "\varpi"]
      && \Span(\category{T})^{\otimes}
      \arrow[dl, "\pi"]
      \\
      & \Finp
    \end{tikzcd}
  \end{equation*}
  where $\pi$ and $\varpi$ are symmetric monoidal categories and $\rho$ exhibits $\Span'(\category{X})^{\otimes}$ as a $\Span(\category{T})^{\otimes}$-monoidal category. Straightening, one finds a lax monoidal functor
  \begin{equation*}
    \hat{r}\colon (\Span(\category{T}), \widetilde{\times}) \to (\ICat, \times)
  \end{equation*}
  with the following description up to equivalence.
  \begin{itemize}
    \item On objects, the functor $\hat{r}$ sends $t \in \Span(\category{T})$ to the fiber $\category{X}_{t} \in \ICat$

    \item On morphisms, $\hat{r}$ sends a span $t \overset{g}{\leftarrow} s \overset{f}{\to} t'$ to the composition $f_{!} \circ g^{*}\colon \category{X}_{t} \to \category{X}_{t'}$.

    \item The structure morphisms
      \begin{equation*}
        \category{X}_{t} \times \category{X}_{t'} \to \category{X}_{t \times t'}
      \end{equation*}
      of the lax monoidal structure on $\hat{r}$ are given by the restriction of the tensor product $\otimes$ to the fibers over $t$ and $t'$.
  \end{itemize}
\end{proposition}
\begin{proof}
  Recall the triple structure $\triple{T}$ from the proof of \hyperref[prop:cartesian_CSMC_always_exists]{Proposition~\ref*{prop:cartesian_CSMC_always_exists}}. We further define a triple structure $\triple{X}$ as follows.
  \begin{itemize}
    \item $\category{X} = \category{X}_{\otimes}$.

    \item $\category{X}\downdag = (\category{X}_{\otimes})_{\Finp\op}(\Finp\op)^{\simeq}$.

    \item $\category{X}\updag$ consists only of $r$-cartesian morphisms.
  \end{itemize}

  One sees that this is adequate, since pullbacks of the necessary form exist by the usual procedure:
  \begin{itemize}
    \item Map the diagram down to $\Finp\op$, take the pullback there.

    \item Take a relative pullback in $\category{T}_{\times}$.

    \item Take an $r$-cartesian lift to produce an $r$-relative pullback in $\category{X}_{\times}$. This lies over a pullback in $\category{T}_{\times}$, hence is a pullback.
  \end{itemize}

  Thus, we have a map of adequate triples $\triple{X} \to \triple{T}$.
  The fact that this map satisfies the conditions of \hyperref[thm:new_barwick]{Theorem~\ref*{thm:new_barwick}} follows immediately from \hyperref[lemma:equivalent_conditions_beck_chevalley_fibration]{Lemma~\ref*{lemma:equivalent_conditions_beck_chevalley_fibration}}. This gives us a cocartesian fibration
  \begin{equation*}
    \rho\colon \Span\triple{X} \to \Span\triple{T}.
  \end{equation*}
  Combining this with the map $\pi$ of \hyperref[prop:cartesian_CSMC_always_exists]{Proposition~\ref*{prop:cartesian_CSMC_always_exists}} and pulling back along the map $\Finp \to \Span\triple{F}$ gives us the triangle
  \begin{equation*}
    \begin{tikzcd}
      \Span'(\category{X})^{\otimes}
      \arrow[rr, "\rho"]
      \arrow[dr, swap, "\varpi"]
      && \Span(\category{T})^{\otimes}
      \arrow[dl, "\pi"]
      \\
      & \Finp
    \end{tikzcd},
  \end{equation*}
  where $\pi$ is the map shown in \hyperref[prop:cartesian_CSMC_always_exists]{Proposition~\ref*{prop:cartesian_CSMC_always_exists}} to be a cocartesian fibration. It remains only to show that $\varpi = \pi \circ \rho$ is a monoidal category. The same argument as in \hyperref[prop:cartesian_CSMC_always_exists]{Proposition~\ref*{prop:cartesian_CSMC_always_exists}} shows that it suffices to show that square in $(\category{X}_{\otimes})_{\langle n \rangle}$ is ambigressive pullback if and only if each component is ambigressive pullback. The pullback part of the condition holds because of the equivalence $(\category{X}_{\otimes})_{\langle n \rangle} \simeq \category{X}^{n}$, and ambigressivity holds because $\category{X}_{\otimes} \to \category{T}_{\times}$ is by assumption cartesian-compatible.
\end{proof}


\subsection{The monoidal twisted arrow category}
\label{ssc:the_monoidal_twisted_arrow_category}

We have seen that for any $\infty$-bicategory $\CC$ (presented as a fibrant scaled simplicial set), there is an $\infty$-category $\Tw(\CC)$, the \emph{twisted arrow category} of $\CC$. We would like to upgrade this construction to a functor $\Tw\colon \ITCat \to \ICat$, where $\ITCat$ is the $\infty$-category of $\infty$-bicategories.

To this end, we note that we can certainly express the twisted arrow category as an ordinary functor
\begin{equation*}
  \Tw'\colon \SSetsc \to \SSetmk.
\end{equation*}
Here we take $\SSetsc$ and $\SSetmk$ to carry their standard model structures.

\begin{lemma}
  The functor $\Tw'$ preserves weak equivalences between fibrant objects.
\end{lemma}
\begin{proof}
  Let $f\colon \CC \to \DD$ be a weak equivalence between fibrant objects in the scaled model structure. Thus, $f$ is a bicategorical equivalence between $\infty$-bicategories. Denote the map on the underlying quasicategories by $\mathring{f}\colon \category{C} \to \category{D}$. We note that $\mathring{f}$ is an equivalence of quasicategories.

  We consider the diagram
  \begin{equation*}
    \begin{tikzcd}[row sep=large, column sep=large]
      \Tw'(\CC)
      \arrow[drr, bend left=20, "\Tw'(f)"]
      \arrow[ddr, bend right=20, swap, "q"]
      \arrow[dr, dashed, "h"]
      \\
      & \mathcal{P}
      \arrow[r, "g"]
      \arrow[d, "r"]
      & \Tw'(\DD)
      \arrow[d, "p"]
      \\
      & \category{C} \times \category{C}\op
      \arrow[r, "\mathring{f} \times \mathring{f}\op"]
      & \category{D} \times \category{D}\op
    \end{tikzcd}
  \end{equation*}
  where the square formed is pullback, and $h$ is the map guaranteed us by the universal property of the pullback. We note that since $p$ is a cartesian fibration, $g$ is a weak equivalence since $\mathring{f} \times \mathring{f}\op$ is. Thus, in order to show that $\Tw'(f)$ is a weak equivalence, it suffices to show that $h$ is.

  Since $h$ is a morphism $q \to r$ of cartesian fibrations, in order to show that it is an equivalence it suffices to check that it is a fiberwise equivalence. Fix some object $C = (c, c') \in \category{C} \times \category{C}\op$. The restriction of $h$ to the fibers of $\Tw'(\CC)$ and $\category{P}$ over $C$ is the map
  \begin{equation*}
    \Map_{\CC}(c, c') \to \Map_{\DD}(f(c), f(c')).
  \end{equation*}
  This is a weak equivalence for all $C$ because $f$ is an equivalence of $\infty$-bicategories.
\end{proof}

By \hyperref[thm:quillen_equiv_ms_and_scaled]{Theorem~\ref*{thm:quillen_equiv_ms_and_scaled}}, there is a right Quillen equivalence $Q\colon \SSetms \to \SSetsc$. Composing this with the functor $\Tw'$ above gives us a functor
\begin{equation*}
  \Tw' \circ Q\colon \SSetms \to \SSetmk.
\end{equation*}
Since $Q$ is a right Quillen functor, it preserves weak equivalences between fibrant objects. Thus, the composite $\Tw' \circ Q$ does as well. Restricting to fibrant objects and taking the simplicial localizations yields a functor
\begin{equation*}
  \SSetms[W^{-1}] \to \SSetmk[W^{-1}].
\end{equation*}

By \cite[Example~1.3.4.8]{luriehigheralgebra}, we have equivalences of $\infty$-categories $\SSetms[W^{-1}] \simeq \ITCat$ and $\SSetmk[W^{-1}] \simeq \ICat$, giving us our functor
\begin{equation*}
  \Tw\colon \ITCat \to \ICat.
\end{equation*}

We are now ready to construct a model for the monoidal twisted arrow category.

\begin{construction}
  The category $\ICat$ admits a Cartesian monoidal structure, which can be expressed as a commutative monoid $\ICatCocart\colon \Finp \to \ITCat$. The starting point of our construction is the composition
  \begin{equation*}
    \begin{tikzcd}
      \Finp
      \arrow[r, "\ICat^{\times}"]
      & \Cat_{(\infty, 2)}
      \arrow[r, "\Tw"]
      & \ICat
    \end{tikzcd}.
  \end{equation*}
  Note that this composition yields a commutative monoid in $\ICat$ since the functor $\Tw$ preserves products. The relative nerve of this composition is a CSMC $\Tw(\ICat)_{\otimes} \to \Finp\op$ with the following description: an $n$-simplex $\sigma$ corresponding to a diagram
  \begin{equation*}
    \begin{tikzcd}
      \Delta^{n}
      \arrow[rr, "\sigma"]
      \arrow[dr, swap, "\phi"]
      && \Tw(\ICat)_{\otimes}
      \arrow[dl, "p'"]
      \\
      & \Finp\op
    \end{tikzcd}
  \end{equation*}
  corresponds to the data of, for each subset $I \subseteq [n]$ having minimal element $i$, a map
  \begin{equation*}
    \tau(I)\colon \Delta^{I} \to \Tw(\ICat)^{i}
  \end{equation*}
  such that For nonempty subsets $I' \subseteq I \subseteq [n]$, the diagram
  \begin{equation*}
    \begin{tikzcd}
      \Delta^{I'}
      \arrow[r]
      \arrow[d, hook]
      & \Tw(\ICat)^{i'}
      \arrow[d]
      \\
      \Delta^{I}
      \arrow[r]
      & \Tw(\ICat)^{i}
    \end{tikzcd}
  \end{equation*}
  commutes.
\end{construction}

\begin{example}
  An object of $\Tw(\ICat)_{\otimes}$ lying over $\langle n \rangle$ corresponds to a collection of functors $\category{C}_{i} \to \category{D}_{i}$, $i \in \langle n \rangle^{\circ}$.
\end{example}

\begin{example}
  A morphism in $\Tw(\ICat)_{\otimes}$ lying over the active map $\langle 1 \rangle \leftarrow \langle 2 \rangle$ in $\Finp\op$ consists\footnote{Here we mean the morphism in $\Finp\op$ corresponding to the active map $\langle 2 \rangle \to \langle 1 \rangle$ in $\Finp$.} of
  \begin{itemize}
    \item A `source' object $F\colon \category{C} \to \category{C}'$

    \item A pair of `target' objects $G_{i}\colon \category{D}_{i} \to \category{D}'_{i}$, $i = 1$, $2$.

    \item A morphism $\Tw(\ICat)$ corresponding to a diagram $\Delta^{3}_{\dagger} \to \ICat$ with front and back
      \begin{equation*}
        \begin{tikzcd}
          \category{C}
          \arrow[r, "\alpha"]
          \arrow[d, ""{name=L, right}, "F"{left}]
          \arrow[dr]
          & \category{D}_{1} \times D_{2}
          \arrow[d, ""{name=R, left}, "G_{1} \times G_{2}"{right}]
          \\
          \category{C}'
          & \category{D}'_{1} \times \category{D}'_{2}
          \arrow[l, "\beta"]
        \end{tikzcd}
        \qquad\text{and}\qquad
        \begin{tikzcd}
          \category{C}
          \arrow[r, "\alpha"]
          \arrow[d, ""{name=L, right}, "F"{left}]
          & \category{D}_{1} \times D_{2}
          \arrow[d, ""{name=R, left}, "G_{1} \times G_{2}"{right}]
          \arrow[dl]
          \\
          \category{C}'
          & \category{D}'_{1} \times \category{D}'_{2}
          \arrow[l, "\beta"]
        \end{tikzcd}.
      \end{equation*}
  \end{itemize}

  A morphism of the above form is cartesian if and only if the corresponding simplex $\Delta^{3}_{\dagger} \to \ICat$ is thin.
\end{example}

\begin{lemma}
  \label{lemma:triangle_of_cartesian_fibrations}
  Let $\category{C}$ be a small 1-category (and, by abuse of notation, its nerve), let $F$, $G\colon \category{C} \to \SSet$ be functors, and let $\alpha\colon F \Rightarrow G$. Suppose that $\alpha$ satisfes the following conditions.
  \begin{enumerate}
    \item For each object $c \in \category{C}$, $\alpha_{c}\colon F(c) \to G(c)$ is a cartesian fibration.

    \item For each morphism $f\colon c \to d$ in $\category{C}$, the map $Ff\colon F(c) \to F(d)$ takes $\alpha_{c}$-cartesian morphisms to $\alpha_{d}$-cartesian morphisms.
  \end{enumerate}
  Then taking the relative nerve gives a diagram
  \begin{equation*}
    \begin{tikzcd}
      N_{F}(\category{C})
      \arrow[rr, "\rho"]
      \arrow[dr, swap, "\Phi"]
      &&
      N_{G}(\category{C})
      \arrow[dl, "\Gamma"]
      \\
      & \category{C}\op
    \end{tikzcd}
  \end{equation*}
  with the following properties.
  \begin{enumerate}
    \item The maps $\Phi$, $\Gamma$, and $\rho$ are all cartesian fibrations.

    \item The $\rho$-cartesian morphisms in $N_{F}(\category{C})$ admit the following description: a morphism in $N(F)(\category{C})$ lying over a morphim $f\colon d \leftarrow c$ in $\category{C}\op$ consists of a triple $(x, y, \phi)$, where $x \in F(d)$, $y \in F(c)$, and $\phi\colon x \to Ff(y)$. Such a morphism is $\rho$-cartesian if the morphism $\phi$ is $\alpha_{d}$-cartesian.
  \end{enumerate}
\end{lemma}
\begin{proof}
  We first prove 2. We already know \cite[Lemma~3.2.5.11]{highertopostheory} that $\rho$ is an inner fibration, so it remains only to show that we can solve lifting problems
  \begin{equation*}
    \begin{tikzcd}
      \Lambda^{n}_{n}
      \arrow[r]
      \arrow[d]
      & N_{F}(\category{C})
      \arrow[d]
      \\
      \Delta^{n}
      \arrow[r]
      \arrow[ur, dashed]
      \arrow[dr, swap, "\gamma"]
      & N_{G}(\category{C})
      \arrow[d]
      \\
      & \category{C}\op
    \end{tikzcd},
  \end{equation*}
  where $\Delta^{\{n-1, n\}} \subset \Lambda^{n}_{n}$ is mapped to a cartesian morphism as described above, i.e.\ a triple $(x, y, \phi)$, where $x \in F(\gamma(n-1))$, $y \in F(\gamma(n))$, and $\phi\colon x \to F(\gamma_{n})(y)$ is $\alpha_{\gamma(n-1)}$-cartesian. This is equivalent to solving the lifting problem
  \begin{equation*}
    \begin{tikzcd}
      \Lambda^{n}_{n}
      \arrow[r]
      \arrow[d]
      & F(\gamma(0))
      \arrow[d, "\alpha_{\gamma(0)}"]
      \\
      \Delta^{n}
      \arrow[r]
      \arrow[ur, dashed]
      & G(\gamma(0))
    \end{tikzcd},
  \end{equation*}
  where $\Lambda^{n}_{n}$ is $F(\gamma_{n-1, 0})(\phi)$. But by assumption $F(\gamma_{n-1, 0})(\phi)$ is $\alpha_{\gamma(0)}$-cartesian, so this lifting problem has a solution.

  Now we show 1. The assumption that each $\alpha_{c}$ is a cartesian fibration guarantees that we have enough cartesian lifts, so $\rho$ is indeed a cartesian fibration. The maps $\Phi$ and $\Gamma$ are cartesian fibrations by definition.
\end{proof}


Since the category $\ICat$ admits products, it admits a cartesian monoidal structure, which we can write as a commutative monoid $G_{1}\colon \Finp \to \ICat$. We can equally view the cartesian monoidal structure as a cocartesian monoidal structure on $\ICat\op$, giving us a commutative monoid $G_{0}\colon \Finp \to \ICat$. Taking these together gives a commutative monoid
\begin{equation*}
  G = G_{0} \times G_{1}\colon \Finp \to \ICat;\qquad \langle n \rangle \mapsto ( \ICat\op )^{n} \times \ICat^{n}.
\end{equation*}
For each $\langle n \rangle \in \Finp\op$ there is a cartesian fibration $\alpha_{n}\colon \Tw(\ICCat)^{n} \to (\ICat^{n})\op \times \ICat^{n}$, which form the components of a natural transformation $\alpha$ from the functor
\begin{equation*}
  F\colon \Finp \to \ICat;\qquad \langle n \rangle \mapsto \Tw(\ICCat)^{n}
\end{equation*}
to the functor $G$.

We now apply the relative nerve to the data $\alpha\colon F \Rightarrow G$. Because the pointwise product of any number of thin 1-simplices in $\Tw(\ICCat)$ is again a thin 1-simplex in $\Tw(\ICCat)$, the conditions of \hyperref[lemma:triangle_of_cartesian_fibrations]{Lemma~\ref*{lemma:triangle_of_cartesian_fibrations}} are satisfied. Unrolling, we find a commuting triangle of cartesian fibrations
\begin{equation}
  \label{eq:base_triangle}
  \begin{tikzcd}
    \Tw(\ICat)_{\otimes}
    \arrow[rr, "r'"]
    \arrow[dr, swap, "q'"]
    && \TICatCart \times (\TICatCocart)\op
    \arrow[dl, "p'"]
    \\
    & \Finp\op
  \end{tikzcd},
\end{equation}
where
\begin{itemize}
  \item $\TICatCart \to \Finp\op$ is the relative nerve (as a cartesian fibration) of the functor $F_{0}$

  \item $(\TICatCocart) \to \Finp$ is the relative nerve (as a \emph{cocartesian} fibration) of the same.
\end{itemize}

Because both $\TICatCocart \to \Finp$ and $\ICatCocart \to \Finp$ classify the same functor $\Finp \to \ICat$, they are related by a fiberwise equivalence. Composing a commutative monoid $\Finp \to \ICatCocart$ with this equivalence allows us to express symmetric monoidal $\infty$-categories as commutative monoids in $\TICatCocart$.

\begin{construction}
  We will denote the full subcategory of $\TICatCart$ on those objects $[\category{D}_{1}, \ldots, \category{D}_{n}]$ such that $\category{D}_{i}$ is an $\infty$-groupoid for all $1 \leq i \leq n$ by $\TSCart$. Note that $\TSCart \to \Finp$ can be understood as the relative nerve (as a cartesian fibration) of a commutative monoid $\Finp \to \ICat$ giving the cartesian monoidal structure on $\S$.

  Fix some monoidal $\infty$-category $\category{C}$ which admits colimits, and such that the tensor product $\otimes\colon \category{C} \to \category{C}$ preserves colimits in each slot. We express this monoidal $\infty$-category as a commutative monoid $\category{C}^{\otimes}\colon \Finp \to \TICatCocart$. Using this, we define a functor
  \begin{equation*}
    \TSCart \to \TICatCart \times (\TICatCocart)\op
  \end{equation*}
  which is the inclusion $\TSCart \hookrightarrow \TICatCart$ on the first component of the product, and given by the composition
  \begin{equation*}
    \TSCart \to \Finp\op \overset{(\category{C}^{\otimes})\op}{\to} (\TICatCocart)\op
  \end{equation*}
  on the second. Forming the pullback square
  \begin{equation*}
    \begin{tikzcd}
      \LS(\category{C})_{\otimes}
      \arrow[r]
      \arrow[d, swap, "r"]
      & \Tw(\ICat)_{\otimes}
      \arrow[d]
      \\
      \TSCart
      \arrow[r]
      & \TICatCart \times (\TICatCocart)\op
    \end{tikzcd}
  \end{equation*}
  gives us a commutative triangle
  \begin{equation*}
    \begin{tikzcd}
      \LS(\category{C})_{\otimes}
      \arrow[rr, "r"]
      \arrow[dr, swap, "q"]
      && \TSCart
      \arrow[dl, "p"]
      \\
      & \Finp\op
    \end{tikzcd}.
  \end{equation*}

  We claim that $\LS(\category{C})_{\otimes}$ is a CSMC, $\TSCart$ is a cartesian CSMC. Since the (cartesian) relative nerve construction produces a cartesian fibration by definition, the map $p$ is a cartesian fibration; by its definition, it is even a CSMC. Furthermore, because the map $r$ is a pullback of the horizontal map in \hyperref[eq:base_triangle]{Diagram~\ref*{eq:base_triangle}}, it is a cartesian fibration. Hence $q$ is also a cartesian fibration. It remains only to show that $q$ is a CSMC. It suffices to show that $r$ is a cartesian fibration of $\infty$-operads. Note that because both $p'$ and $q'$ are CSMCs, $r'$ is a cartesian fibration of $\infty$-operads. The claim follows because $r$ is a pullback of $r'$.
\end{construction}

\begin{example}
  An object of $\LS(\category{C})_{\otimes}$ lying over $\langle n \rangle$ corresponds to a collection of functors $X \to \category{C}$, $i \in \langle n \rangle^{\circ}$.
\end{example}

\begin{example}
  A morphism in $\Tw(\ICat)_{\otimes}$ lying over the active map $\langle 1 \rangle \leftarrow \langle 2 \rangle$ in $\Finp\op$ consists of
  \begin{itemize}
    \item A `source' object $F\colon X \to \category{C}$

    \item A pair of `target' objects $G_{i}\colon Y_{i} \to \category{C}$, $i = 1$, $2$.

    \item A morphism $\Tw(\ICat)$ corresponding to a diagram $\Delta^{3}_{\dagger} \to \ICat$ with front and back
      \begin{equation*}
        \begin{tikzcd}
          X
          \arrow[r, "\alpha"]
          \arrow[d, ""{name=L, right}, "F"{left}]
          \arrow[dr]
          & Y_{1} \times Y_{2}
          \arrow[d, ""{name=R, left}, "G_{1} \times G_{2}"{right}]
          \\
          \category{C}
          & \category{C} \times \category{C}
          \arrow[l, "\otimes"]
        \end{tikzcd}
        \qquad\text{and}\qquad
        \begin{tikzcd}
          X
          \arrow[r, "\alpha"]
          \arrow[d, ""{name=L, right}, "F"{left}]
          & Y_{1} \times Y_{2}
          \arrow[d, ""{name=R, left}, "G_{1} \times G_{2}"{right}]
          \arrow[dl]
          \\
          \category{C}
          & \category{C} \times \category{C}
          \arrow[l, "\otimes"]
        \end{tikzcd}.
      \end{equation*}
  \end{itemize}

  A morphism of the above form is $r$-cartesian if and only if the corresponding simplex $\Delta^{3}_{\dagger} \to \ICat$ is thin, and $q$-cartesian if and only if the corresponding simplex is thin, and $\alpha$ is an equivalence.
\end{example}

\begin{example}
  Examining the $q$-cartesian case more closely, one sees that the tensor product of two local systems $F\colon X \to \category{C}$ and $G\colon Y \to \category{C}$ is the local system given the composition
  \begin{equation*}
    F \otimes G\colon X \times Y \to \category{C} \times \category{C} \overset{\otimes}{\to} \category{C}
  \end{equation*}
\end{example}

\begin{lemma}
  \label{lemma:tensor_product_of_local_systems_preserves_cocart_edges}
  Let $e\colon F \to G$ and $e'\colon F' \to G'$ be $r|\langle 1 \rangle$-cocartesian edges of $\LS(\category{C})_{\otimes}$. Then $e \otimes e'$ is $r|\langle 1 \rangle$-cocartesian.
  %\begin{equation*}
  %  e =
  %  \begin{tikzcd}
  %    X
  %    \arrow[r]
  %    \arrow[d, swap, "F"]
  %    & Y
  %    \arrow[d, "G"]
  %    \\
  %    \category{C}
  %    & \category{C}
  %    \arrow[l, "\id"]
  %  \end{tikzcd},\qquad e' =
  %  \begin{tikzcd}
  %    X'
  %    \arrow[r]
  %    \arrow[d, swap, "F'"]
  %    & Y'
  %    \arrow[d, "G'"]
  %    \\
  %    \category{C}
  %    & \category{C}
  %    \arrow[l, "\id"]
  %  \end{tikzcd}.
  %\end{equation*}
  %Then $e \otimes e'\colon F \otimes F' \to G \otimes G'$ is also $r$-cocartesian.
\end{lemma}
\begin{proof}
  The tensor product $e \otimes e'$ is given, up to homotopy, by the pasting diagram
  
  In order to show that this map is $r$-cocartesian, we need to show that the outer triangle
  \begin{equation*}
    \begin{tikzcd}[row sep=large]
      X \times X'
      \arrow[rr, "F \times F'", ""{below, name=M}]
      \arrow[dr, swap, "f \times f'"]
      && \category{C} \times \category{C}
      \arrow[r, "\otimes"]
      & \category{C}
      \\
      & Y \times Y'
      \arrow[urr, bend right, swap, "\otimes \circ (G \times G')"]
      \arrow[ur, swap, "G \times G'"]
      \arrow[from=M, Rightarrow, shorten=1ex]
    \end{tikzcd}
  \end{equation*}
  exhibits $\otimes \circ (G \times G')$ as the left Kan extension of $\otimes \circ (F \times F')$ along $f \times f'$. But this follows from the fact that $\otimes$ preserves colimits in both slots.
\end{proof}

\begin{proposition}
  The map $r$ above is a monoidal Beck-Chevalley fibration.
\end{proposition}
\begin{proof}
  We need to check the conditions (M1)--(M5) of \hyperref[def:monoidal_beck_chevalley_fibration]{Definition~\ref*{def:monoidal_beck_chevalley_fibration}}. The condition (M1) is the content of \hyperref[prop:local_systems_are_beck_chevalley]{Proposition~\ref*{prop:local_systems_are_beck_chevalley}}. Conditions (M2), (M3), and (M5) follow immediately from \hyperref[lemma:equivalent_conditions_to_be_cartesan]{Lemma~\ref*{lemma:equivalent_conditions_to_be_cartesan}}, using the fact that $r$ is a cartesian fibration. In order to show that (M4) holds, it suffices by \hyperref[lemma:co_cartesian_preservation_determined_by_bifunctor]{Lemma~\ref*{lemma:co_cartesian_preservation_determined_by_bifunctor}} to check that the tensor product of two $r|\langle 1 \rangle$-cocartesian edges is again $r|\langle 1 \rangle$-cocartesian. But this is the content of \hyperref[lemma:tensor_product_of_local_systems_preserves_cocart_edges]{Lemma~\ref*{lemma:tensor_product_of_local_systems_preserves_cocart_edges}}.
\end{proof}

\begin{corollary}
  There is a lax monoidal functor
  \begin{equation*}
    \hat{r}\colon (\Span(\S), \widetilde{\times}) \to (\ICat, \times),
  \end{equation*}
  with the following description up to equivalence.
  \begin{itemize}
    \item On objects, the functor $\hat{r}$ sends a space $X$ to the $\infty$-category $\LS(\category{C})_{X}$ of $\category{C}$-local systems on $X$.

    \item On morphisms, the functor $\hat{r}$ sends a span of spaces $X \overset{g}{\leftarrow} Y \overset{f}{\to} X'$ to the pull-push
      \begin{equation*}
        f_{!} \circ g^{*}\colon \LS(\category{C})_{X} \to \LS(\category{C})_{X'}.
      \end{equation*}

    \item The structure morphisms of the lax monoidal structure are the maps
      \begin{equation*}
        \LS(\category{C})_{X} \times \LS(\category{C})_{X'} \to \LS(\category{C})_{X \times X'}
      \end{equation*}
      given by the composition
      \begin{equation*}
        \Fun(X, \category{C}) \times \Fun(Y, \category{C}) \overset{\times}{\to} \Fun(X \times Y, \category{C} \times \category{C}) \overset{\otimes}{\to} \Fun(X \times Y, \category{C}),
      \end{equation*}
      under the identification $\LS(\category{C})_{X} \cong \Fun(X, \category{C})$.
  \end{itemize}
\end{corollary}

\end{document}
