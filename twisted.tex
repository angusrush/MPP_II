\documentclass[main.tex]{subfiles}

\begin{document}

\section{Local systems}
\label{sec:local_systems}

In \cite{garcia2020enhanced}, the twisted arrow category of an $\infty$-bicategory is defined.

\subsection{The twisted arrow category}
\label{ssc:the_twisted_arrow_category}

For a 2-category $\mathsf{C}$, the twisted arrow 1-category $\Tw(\mathsf{C})$ has the following description.
\begin{itemize}
  \item The objects of $\Tw(\mathsf{C})$ are the morphisms of $\mathsf{C}$:
    \begin{equation*}
      f\colon c \to c'.
    \end{equation*}

  \item For two objects $(f\colon c \to c')$ and $(g\colon d \to d')$, the morphisms $f \to g$ are given by diagrams
    \begin{equation*}
      \begin{tikzcd}
        c
        \arrow[r, "a"]
        \arrow[d, "f"{swap}, ""{name=L}]
        & d
        \arrow[d, "g", ""{name=R, swap}]
        \\
        c'
        & d'
        \arrow[l, "a'"]
        \arrow[from=L, to=R, Rightarrow, shorten=2ex, "\alpha"]
      \end{tikzcd},
    \end{equation*}
    where $\alpha$ is a 2-morphism $f \Rightarrow a' \circ g \circ a$.


  \item The composition of morphisms is given by concatenating the corresponding diagrams.
    \begin{equation*}
      \begin{tikzcd}
        c
        \arrow[r, "a"]
        \arrow[d, "f"{swap}, ""{name=L}]
        & d
        \arrow[d, "g"{description}, ""{name=LM}, ""{name=RM, swap}]
        \arrow[r, "b"]
        & e
        \arrow[d, "h", ""{name=R, swap}]
        \\
        c'
        & d'
        \arrow[l, "a'"]
        & e'
        \arrow[l, "b'"]
        \arrow[from=L, to=RM, Rightarrow, shorten=2ex, "\alpha"]
        \arrow[from=LM, to=R, Rightarrow, shorten=2ex, "\beta"]
      \end{tikzcd}
    \end{equation*}
\end{itemize}

In \cite{garcia2020enhanced}, a homotopy-coherent version of the twisted arrow category of an $\infty$-bicategory is defined. For any $\infty$-bicategory $\CC$, the twisted arrow $\infty$-category of $\CC$, denoted $\Tw(\CC)$, is a quasicategory whose $n$-simplices are diagrams $(\Delta^{n})\op \star \Delta^{n} \to \CC$, together with a scaling to ensure that the information encoded in an $n$-simplex is determined, up to contractible choice, by data
\begin{equation*}
  \overbrace{
    \begin{tikzcd}[ampersand replacement=\&]
      c_{0}
      \arrow[r, "a_{0}"]
      \arrow[d, "f_{0}"{swap}, ""{name=L1}]
      \& c_{1}
      \arrow[d, "f_{1}"{description}, ""{swap, name=R1}]
      \arrow[r, dotted]
      \& \cdots
      \arrow[r, dotted]
      \& c_{n-1}
      \arrow[r, "a_{n-1}"]
      \arrow[d, "f_{n-1}"{description}, ""{name=Ln}]
      \& c_{n}
      \arrow[d, "f_{n}", ""{swap, name=Rn}]
      \\
      c'_{0}
      \& c'_{1}
      \arrow[l, "a'_{0}"]
      \& \cdots
      \arrow[l, dotted]
      \& c'_{n-1}
      \arrow[l, dotted]
      \& c'_{n}
      \arrow[l, "a'_{n-1}"]
      \arrow[from=L1, to=R1, Rightarrow, "\alpha_{0}", shorten=2ex]
      \arrow[from=Ln, to=Rn, Rightarrow, "\alpha_{n-1}", shorten=2ex]
    \end{tikzcd}
  }^{n\text{ squares}}
\end{equation*}
in $\CC$. Here, the top row of morphisms corresponds to the spine of the $n$-simplex $\Delta^{n} \subset \Delta^{n} \star (\Delta^{n})\op$, and the bottom row of morphisms to the spine of $(\Delta^{n})\op \subset \Delta^{n} \star (\Delta^{n})\op$. To make this correspondence more clear, we will introduce the following notation.

\begin{notation}
  For $i \in [n]$, we will write $\overline{i} := 2n+1-i$.
\end{notation}

Thus, the $i$th column in the above diagram corresponds to the image of the morphism $i \to \overline{i}$ in $\Delta^{n} \star (\Delta^{n})\op$.

We are now ready to define this scaling.

\begin{definition}
  We define a cosimplicial object $\tilde{Q}\colon \Delta \to \SSetsc$ by sending
  \begin{equation*}
    \tilde{Q}([n]) = (\Delta^{n} \star (\Delta^{n})\op, \dagger),
  \end{equation*}
  where $\dagger$ is the scaling consisting of all degenerate 2-simplices, together with all 2-simplices of the following kinds:
  \begin{enumerate}
    \item All simplices $\Delta^{2} \to \Delta^{n} \star (\Delta^{n})\op$ factoring through $\Delta^{n}$.

    \item All simplices $\Delta^{2} \to \Delta^{n} \star (\Delta^{n})\op$ factoring through $(\Delta^{n})\op$.

    \item All simplices $\Delta^{\{i, j, \overline{k}\}} \subseteq \Delta^{n} \star (\Delta^{n})\op$, $i < j \leq k$.

    \item All simplices $\Delta^{\{k, \overline{j}, \overline{i}\}} \subseteq \Delta^{n} \star (\Delta^{n})\op$, $i < j \leq k$.
  \end{enumerate}
\end{definition}

Note that $\Delta^{n} \star (\Delta^{n})\op \cong \Delta^{2n+1}$. We will use this identification freely.

This extends to a nerve-realization adjunction
\begin{equation*}
  Q : \SSet \longleftrightarrow \SSetsc : \Tw,
\end{equation*}
where the functor $Q$ is the extension by colimits of the functor $\tilde{Q}$, and for any scaled simplicial set $X$, the simplicial set $\Tw(X)$ has $n$-simplices
\begin{equation*}
  \Hom_{\SSetsc}(Q(\Delta^{n}), X).
\end{equation*}

\begin{notation}
  For any simplicial set $X$, $Q(X)$ carries the scaling given simplex-wise by that described above. We will denote this scaling by $\dagger_{X}$, or simply by $\dagger$ if the simplicial set $X$ is clear from context. It will sometimes pay to notate the scaling $\dagger$ on $Q(X)$ explicitly, writing $Q(X) = Q(X)_{\dagger}$. A We can thus write $Q(\Delta^{n})$ explicitly and compactly as $\Delta^{2n+1}_{\dagger}$, which we will often do.
\end{notation}

The inclusion $\Delta^{n} \amalg (\Delta^{n})\op \hookrightarrow \Delta^{n} \star (\Delta^{n})\op$ provides, for any scaled simplicial set $K$, a functor $\Tw(K) \to K \times K\op$. In fact, this assignment is functorial.

\begin{proposition}
  This extends to a functor $\ICCat \to \ICat^{\Delta^{1}}$.
\end{proposition}

\subsection{Two lemmas about marked-scaled anodyne morphisms}
\label{ssc:two_lemmas_about_marked_scaled_anodyne_morphisms}

In the section following this one, we provide a fairly explicit construction of a family of marked-scaled anodyne inclusions. Constructing these inclusions directly from the classes of generating marked-scaled anodyne inclusions given in \hyperref[def:ms-anodyne_morphisms]{Definition~\ref*{def:ms-anodyne_morphisms}} horn fillings would be possible but tedious. To lighten this load somewhat, we reproduce in this section two lemmas from \cite{garcia2cartesianfibrationsii}. The majority of this section is a retelling of sections 2.3 and 2.4 of \cite{garcia2cartesianfibrationsii}. Note however that our needs will be rather different than those of \cite{garcia2cartesianfibrationsii}, and this is reflected in some subtle differences of notation.

We first need a compact notation for specifying simplicial subsets of $\Delta^{n}$. Denote by $P\colon \Set \to \Set$ the power set functor.

\begin{definition}
  Let $T$ be a finite linearly ordered set, so $T \cong [n]$ for some $n \in \N$. For any subset $\mathcal{A} \subseteq  P(T)$, define a simplicial subset
  \begin{equation*}
    \S^{\mathcal{A}}_{T} := \bigcup_{S \in \mathcal{A}} \Delta^{T \smallsetminus S} \subseteq \Delta^{T}.
  \end{equation*}
\end{definition}

\begin{notation}
  \leavevmode
  \begin{itemize}
    \item If the linearly ordered set $T$ is clear from context, we will drop it, writing $\S^{\mathcal{A}}$.

    \item For any marked-scaled $n$-simplex $(\Delta^{n}, E, T)$ we will by minor abuse of notation reuse the same letters $E$ and $T$ to denote the restriction of the markings and scalings to any simplicial subset $S \subseteq \Delta^{n}$.
  \end{itemize}
\end{notation}

\begin{note}
  \label{note:correspondence_simplicial_subsets_power_set}
  The assignment $\mathcal{A} \mapsto \S^{\mathcal{A}}$ does not induce is not a one-to-one correspondence between subsets $\mathcal{A} \subseteq P([n])$ and simplicial subsets $S^{\mathcal{A}} \subseteq \Delta^{n}$, since for $S \subsetneq S'$, we have that $\Delta^{[n] \smallsetminus S'} \subseteq \Delta^{[n] \smallsetminus S}$.
\end{note}

It will be useful to consider two subsets $\mathcal{A}$ and $\mathcal{A}' \subseteq P(T)$ to be equivalent if they produce the same simplicial subset of $\Delta^{T}$.

\begin{definition}
  We will write $\mathcal{A} \sim \mathcal{A}'$ if $\S^{\mathcal{A}} = \S^{\mathcal{A}'}$.
\end{definition}

The relation $\sim$ is an equivalence relation, but we will not use this.

The set $P([n])$ forms a poset, ordered by inclusion, and any $\mathcal{A} \subseteq P([n])$ a subposet. An element $q$ of a poset $Q$ is said to be \emph{minimal} if there are no elements of $Q$ which are strictly less than $q$. By \hyperref[note:correspondence_simplicial_subsets_power_set]{Note~\ref*{note:correspondence_simplicial_subsets_power_set}} only the minimal elements of $\mathcal{A}$ contribute to the union defining $\S^{\mathcal{A}}$. We have just shown the following.

\begin{lemma}
  \label{lemma:replace_poset_by_minimal_elements}
  For any $\mathcal{A} \subseteq P([n])$, we have $\mathcal{A} \sim \mathrm{min}(\mathcal{A})$, where $\mathrm{min}(\mathcal{A}) \subseteq \mathcal{A}$ is the set of minimal elements of $\mathcal{A}$.
\end{lemma}

Simplicial subsets of the form $\S^{\mathcal{A}}_{T}$ enjoy the following easily-proved calculation rules.

\begin{lemma}
  \label{lemma:subset_of_simplex_contains_k_simplices}
  Suppose $\mathcal{A} \subseteq P([n])$ is a subset such that for all $S$, $T \in \mathcal{A}$, it holds that $S \cap T = \emptyset$. Then $\S^{\mathcal{A}}$ contains each $k$-simplex of $\Delta^{n}$ for all $k < \abs{\mathcal{A}}$.
\end{lemma}
\begin{proof}
  Let $X \subseteq [n]$. The simplex $\Delta^{X} \to \Delta^{n}$ factors through $\S^{\mathcal{A}}$ if and only if it factors through $\Delta^{[n] \smallsetminus T}$ for some (possibly not unique) $T \in \mathcal{A}$. This in turn is true if and only if $X$ and $T$ do not have any elements in common. For $\abs{X} < \abs{\mathcal{A}}$, there is always a set $T \in \mathcal{A}$ which does not have any elements in common with $X$.
\end{proof}

\begin{lemma}
  \label{lemma:add_a_simplex}
  Let $\mathcal{A} \subseteq P([n])$ and $T \subseteq [n]$. Then
  \begin{equation*}
    \S^{\mathcal{A}}_{[n]} \cup \Delta^{T} = \S^{\mathcal{A} \cup \{[n] \smallsetminus T\}}_{[n]}.
  \end{equation*}
\end{lemma}

The next lemma will be particularly useful in building inclusions $\S^{\mathcal{A}}_{[n]} \hookrightarrow \Delta^{n}$ simplex-by-simplex.

\begin{lemma}
  \label{lemma:bicartesian_square}
  Let $\mathcal{A} \subset P([n])$, and let $T \subset [n]$. Then the square
  \begin{equation*}
    \begin{tikzcd}
      \S^{\mathcal{A}|T}_{T}
      \arrow[r, hook]
      \arrow[d, hook]
      & \Delta^{T}
      \arrow[d, hook]
      \\
      \S^{\mathcal{A}}_{[n]}
      \arrow[r, hook]
      & \S^{\mathcal{A}}_{[n]} \cup \Delta^{T}
    \end{tikzcd}
  \end{equation*}
  is bicartesian, where $\mathcal{A}|T$ is the subset of $P(T)$ given by
  \begin{equation*}
    \mathcal{A}|T = \{S \cap T \mid S \in \mathcal{A}\}.
  \end{equation*}
\end{lemma}
\begin{proof}
  We have an equality
  \begin{equation*}
    \mathcal{S}_{T}^{\mathcal{A}|T} = \S^{\mathcal{A}}_{[n]} \cap \Delta^{T}.
  \end{equation*}
  as subsets of $\Delta^{n}$.
\end{proof}


In the remainder of this section we reproduce two lemmas from \cite{garcia2cartesianfibrationsii} which provide criteria for the inclusion $(\S^{\mathcal{A}}, E, T) \subseteq (\Delta^{n}, E, T)$ to be marked-scaled anodyne.

\begin{definition}
  Let $\mathcal{A} \subseteq P([n])$. We call $X \in P([n])$ an \defn{$\mathcal{A}$-basal set} if it contains precisely one element from each $S \in \mathcal{A}$. We denote the set of all $\mathcal{A}$-basal sets by $\Bas(\mathcal{A})$.
\end{definition}

\begin{definition}[\cite{garcia2020enhanced}, Definition 1.3]
  \label{def:inner_dull}
  We will call a subset $\mathcal{A} \subseteq P([n])$ \defn{inner dull} if it satisfies the following conditions.
  \begin{itemize}
    \item It does not include the empty set; $\emptyset \notin \mathcal{A}$.

    \item There exists $0 < i < n$ such that for all $S \in \mathcal{A}$, we have $i \notin S$.

    \item For every $S$, $T \in \mathcal{A}$, it follows that $S \cap T = \emptyset$.

    \item For each $\mathcal{A}$-basal set $X \in P([n])$, there exist $u$, $v \in X$ such that $u < i < v$.
  \end{itemize}

  The element $i \in [n]$ is known as the \emph{pivot point.}
\end{definition}

\begin{note}
  The last condition of \hyperref[def:inner_dull]{Definition~\ref*{def:inner_dull}} is always satisfied if $\mathcal{A}$ contains two singletons $\{u\}$ and $\{v\}$ such that $u < i < v$.
\end{note}

\begin{definition}
  We will call a subset $\mathcal{A} \subseteq P([n])$ \defn{right dull} if it satisfies the following conditions.
  \begin{itemize}
    \item It does not include the empty set; $\emptyset \notin \mathcal{A}$.

    \item For all $S \in \mathcal{A}$, we have $n \notin S$.

    \item There exists some $\ell \in [n]$ such that $\{s\} \in \mathcal{A}$ for some $s \leq \ell$.

    \item For every $S$, $T \in \mathcal{A}$, it follows that $S \cap T = \emptyset$.
  \end{itemize}

  In this case, we will refer to $n$ as the pivot point.
\end{definition}

\begin{definition}
  Let $\mathcal{A} \subseteq P([n])$ be an inner dull subset with pivot point $i$. We will denote the adjacent elements of $X$ surrounding $i$ by $\ell^{X} < i < u^{X}$.
\end{definition}


\begin{lemma}[The Pivot Trick: \cite{garcia2cartesianfibrationsii}, Lemma 2.3.5]
  \label{lemma:pivot_trick}
  Let $\mathcal{A} \subseteq P([n])$ be an inner dull subset with pivot point $i$, and let $(\Delta^{n}, E, T)$ be a marked-scaled simplex. Further suppose that the following conditions hold:
  \begin{enumerate}
    \item Every marked edge $e \in E$ which does not contain $i$ factors through $\S^{\mathcal{A}}$.

    \item For all scaled simplices $\sigma = \{a < b < c\}$ of $\Delta^{n}$ which do not factor through $\S^{\mathcal{A}}$, and which do not contain the pivot point $i$, we have $a < i < c$, and $\sigma \cup \{i\}$ is fully scaled.

    \item For all $X \in \Bas(\mathcal{A})$ and all $r$, $s \in [n]$ such that $\ell^{X} \leq r < i < s \leq u^{X}$, the triangle $\{r, i, s\}$ is scaled
  \end{enumerate}

  Then the inclusion $(\mathcal{S}^{\mathcal{A}}, E, T) \hookrightarrow (\Delta^{n}, E, T)$ is marked-scaled anodyne.
\end{lemma}

\begin{lemma}
  \label{lemma:right-anodyne_pivot_trick}
  Let $\mathcal{A} \subset P([n])$ be a right dull subset (whose pivot point is by definition $n$), and let $(\Delta^{n}, E, T)$ be a marked-scaled simplex. Further suppose that for every $Z \in \Bas(\mathcal{A})$ the following condition holds:
  \begin{itemize}
    \item Denote by $\ell^{Z}_{-}$ and $\ell^{Z}_{+}$ the minimal and maximal element of $Z$ respectively. For all $r$, $s \in [n]$ with $r \leq \ell^{Z}_{-} \leq \ell^{Z}_{+} \leq s < n$, the triangle $\Delta^{\{r, s, n\}}$ is scaled, and the simplex $\Delta^{\{s, n\}}$ is marked.
  \end{itemize}

  Then the inclusion $(\mathcal{S}^{\mathcal{A}}, E, T) \hookrightarrow (\Delta^{n}, E, T)$ is marked-scaled anodyne.
\end{lemma}


\subsection{The fibration governing local systems}
\label{ssc:the_fibration}

For any $\infty$-category $\category{C}$, a $\category{C}$-local system on some space $X$ is simply a functor $X \to \category{C}$. Thus, the $\infty$-category of $\category{C}$-local systems on $X$ should simply be $\LS(\category{C}, X):=\Fun(X, \category{C})$. We now allow $X$ to vary, defining the category $\LS(\category{C})$ of $\category{C}$-local systems.

\begin{definition}
  For any cocomplete $\infty$-category $\category{C}$, we define the $\infty$-category of $\category{C}$-local systems $\LS(\category{C})$ together with a map of simplicial sets $p\colon \LS(\category{C}) \to \S$ by the following pullback diagram.
  \begin{equation*}
    \begin{tikzcd}
      \LS(\category{C})
      \arrow[r, hook]
      \arrow[d, swap, "p"]
      & \Tw(\ICCat)
      \arrow[d, "p'"]
      \\
      \S \times \{\category{C}\}
      \arrow[r]
      & \ICat \times \ICat\op
    \end{tikzcd}
  \end{equation*}
\end{definition}

It is shown in \cite{garcia2020enhanced} that $p'$, hence also $p$, is a cartesian fibration. The cartesian fibration $p$ classifies the functor $\S\op \to \ICat$ sending
\begin{equation*}
  f\colon X \to Y \qquad \longmapsto \qquad f^{*}\colon \Fun(Y, \category{C}) \to \Fun(X, \category{C}).
\end{equation*}
Under the assumption that $\category{C}$ is cocomplete, each pullback map $f^{*}$ has a left adjoint $f_{!}$, given by left Kan extension. It follows on abstract grounds that $p$ is also a cocartesian fibration, whose cocartesian edges represent left Kan extension. In this section, we show this explicitly.

A general morphism $\Delta^{1} \to \LS(\category{C})$ corresponds to a map $Q(\Delta^{1}) = \Delta^{3}_{\dagger} \to \ICCat$ satisfying the following conditions.
\begin{enumerate}
  \item The objects $\Delta^{\{0\}}$ and $\Delta^{\{1\}}$ are mapped to spaces.

  \item The image of $\Delta^{\{2,3\}} \subset \Delta^{3}$ is $\id_{\category{C}}$.
\end{enumerate}

\begin{definition}
  \label{def:admissible}
  We will call a 3-simplex $\Delta^{3}_{\dagger} \to \ICCat$ satisfying conditions 1.\ and 2.\ above admissible. More generally, a $(2n+1)$-simplex $\sigma\colon \Delta^{2n+1}_{\dagger} \to \ICCat$ will be called \defn{admissible} if the following conditions are satisfied.
  \begin{itemize}
    \item The objects $\sigma(\Delta^{\{0\}})$, \dots, $\sigma(\Delta^{\{n\}})$ are spaces.

    \item The restriction of $\sigma$ to the $n$-simplex $\Delta^{\{n+1, \ldots, 2n+1\}}$ is the constant functor with value $\category{C} \in \ICCat$.
  \end{itemize}
\end{definition}

\begin{note}
  The admissible $(2n+1)$-simplicies $\Delta^{2n+1}_{\dagger} \to \ICCat$ are precisely those which are adjunct to a map $\Delta^{n} \to \LS(\category{C})$.
\end{note}

\begin{definition}
  \label{def:left_kan_simplex}
  A $(2n+1)$-simplex $\sigma\colon \Delta^{2n+1}_{\dagger} \to \ICCat$ is said to be \defn{left Kan} if it has the following characteristies.
  \begin{enumerate}
    \item It is admissible; that is, it is adjunct to a simplex $\Delta^{n} \to \LS(\category{C})$.

    \item The restriction of $\sigma$ to the 2-simplex $\Delta^{\{0,1,\overline{0}\}}_{\flat} \subset \Delta^{2n+1}_{\dagger}$ is left Kan.
  \end{enumerate}
\end{definition}

\begin{example}
  \label{eg:left_kan_morphism}
  We draw the `front' and `back' of a general admissible $3$-simplex $\sigma\colon \Delta^{3}_{\dagger} \to \ICCat$ corresponding to some morphism $\Delta^{1} \to \LS(\category{C})$.
  \begin{equation*}
    \begin{tikzcd}[column sep=large, row sep=large]
      X
      \arrow[r, "f"]
      \arrow[d, "\mathcal{F}"{swap}, ""{name=L}]
      \arrow[dr, "\mathcal{H}"]
      & Y
      \arrow[d, "\mathcal{G}"]
      \\
      \category{C}
      & \category{C}
      \arrow[l, "\id_{\category{C}}"]
      \arrow[from=L, Rightarrow, shorten=3ex, "\zeta"{swap}]
    \end{tikzcd}
    \qquad\text{and}\qquad
    \begin{tikzcd}[column sep=large, row sep=large]
      X
      \arrow[r, "f"]
      \arrow[d, "\mathcal{F}"{swap}, ""{name=L}]
      & Y
      \arrow[d, "\mathcal{G}"]
      \arrow[dl, "\mathcal{G}'"]
      \arrow[from=L, Rightarrow, shorten=3ex, "\eta"]
      \\
      \category{C}
      & \category{C}
      \arrow[l, "\id_{\category{C}}"]
    \end{tikzcd}
  \end{equation*}
  Here, the $2$-simplices which are notated without natural transformations are constrained by the scaling $\dagger$ to be thin. Such an admissible simplex $\sigma$ is left Kan if and only if $\mathcal{G}'$ is a left Kan extension of $\mathcal{F}$ along $f$, and $\eta$ is a unit map.
\end{example}

Our main goal in this section will be to prove the following.

\begin{theorem}
  \label{thm:cocartesian_edges_of_p}
  An edge $\Delta^{1} \to \LS(\category{C})$ is $p$-cocartesian if and only if it is left Kan.
\end{theorem}

This will imply \hyperref[cor:cocartesian_fibration]{Corollary~\ref*{cor:cocartesian_fibration}} below. We provide a full proof of \hyperref[cor:cocartesian_fibration]{Corollary~\ref*{cor:cocartesian_fibration}} before proving \hyperref[thm:cocartesian_edges_of_p]{Theorem~\ref*{thm:cocartesian_edges_of_p}} because the strategy we will use to prove \hyperref[thm:cocartesian_edges_of_p]{Theorem~\ref*{thm:cocartesian_edges_of_p}} is similar to, but more complicated than, that employed in the proof of \hyperref[cor:cocartesian_fibration]{Corollary~\ref*{cor:cocartesian_fibration}}.

\begin{corollary}
  \label{cor:cocartesian_fibration}
  The map $p\colon \LS(\category{C}) \to \S$ is a cocartesian fibration.
\end{corollary}
\begin{notation}
  We endow the quasicategory $\LS(C)$ with the marking $\clubsuit \subseteq \LS(\category{C})_{1}$ consisting of all left Kan edges.
\end{notation}
\begin{proof}[Proof of Corollary \ref{cor:cocartesian_fibration}]
  We know that $p$ is a cartesian fibration, hence certainly an inner fibration. We need to show that $p$ has enough cocartesian lifts, i.e.\ that any lifting problem
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{\{0\}})^{\flat}
      \arrow[r]
      \arrow[d, hook]
      & \LS(\category{C})^{\clubsuit}
      \arrow[d]
      \\
      (\Delta^{1})^{\sharp}
      \arrow[r]
      \arrow[ur, dashed]
      & (\S)^{\sharp}
    \end{tikzcd}
  \end{equation*}
  has a dashed solution. Any such lifting problem is adjunct to a lifting problem of the form
  \begin{equation}
    \label{eq:unmarked_lifting_problem}
    \begin{tikzcd}
      K_{\dagger}
      \arrow[r]
      \arrow[d, hook]
      & \ICCat
      \\
      \Delta^{3}_{\dagger}
      \arrow[ur, dashed]
    \end{tikzcd},
  \end{equation}
  where $K_{\dagger} \cong (\Delta^{\{0,1\}} \cup \Delta^{\{0,3\}} \cup \Delta^{\{2,3\}}, \dagger)$, and $K_{\dagger} \to \ICCat$ is the restriction of an admissible simplex (this tells us that $\Delta^{\{0\}}$ and $\Delta^{\{1\}}$ are mapped to spaces, and that $\Delta^{\{2,3\}}$ is mapped to $\id_{\category{C}}$). We need to construct a dashed lift which is left Kan.

  It is relatively easy to do this directly, but we take a different approach, which we will generalize in our proof of \hyperref[thm:cocartesian_edges_of_p]{Theorem~\ref*{thm:cocartesian_edges_of_p}}. We endow $\ICCat$ with a marking $\natural$ consisting of all equivalences. We endow $\Delta^{3}_{\dagger}$ with the marking $\heartsuit$ consisting of the simplex $\Delta^{\{2,3\}}$ together with all degenerate 1-simplices. We denote the restriction of this marking to $K$ also by $\heartsuit$. We then note that the lifting problem of \hyperref[eq:unmarked_lifting_problem]{Equation~\ref*{eq:unmarked_lifting_problem}} is equivalent to the marked version
  \begin{equation*}
    \begin{tikzcd}
      (K, \heartsuit, \dagger)
      \arrow[d, hook, swap, "a"]
      \arrow[r]
      & \ICCat^{\natural}
      \\
      (\Delta^{3}, \heartsuit, \dagger)
      \arrow[ur, dashed]
    \end{tikzcd};
  \end{equation*}
  the only condition imposed by the markings we have just added is that the simplex $\Delta^{\{2,3\}} \subset K$ be sent to an equivalence, which is always satisfied for the lifting problem above since $\id_{\category{C}}$ is an equivalence.

  We note that there is a pullback square
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{\{0,1\}} \cup \Delta^{\{0,3\}}, \flat, \flat)
      \arrow[r, hook, "u_{1}"]
      \arrow[d, hook, swap, "b"]
      & (K, \heartsuit, \dagger)
      \arrow[d, hook, "a"]
      \\
      (\Delta^{\{0,1,3\}}, \flat, \flat)
      \arrow[r, hook, "v_{1}"]
      & (\Delta^{3}, \heartsuit, \dagger)
    \end{tikzcd}.
  \end{equation*}

    The map $u_{1}$ is a pushout along the map $(\Delta^{\{1\}}, \flat, \flat) \hookrightarrow (\Delta^{1}, \sharp, \flat)$, which is marked-scaled anodyne of type \ref{item:outerms}. It is thus a weak equivalence. The map $v_{1}$ is a weak equivalence by \hyperref[lemma:map_u_is_equivalence]{Lemma~\ref*{lemma:map_u_is_equivalence}}. Thus, by \cite[Prop.~A.2.3.1]{highertopostheory}, in order to find a lift as in \hyperref[eq:unmarked_lifting_problem]{Equation~\ref*{eq:unmarked_lifting_problem}} it will suffice to find a lift
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{\{0,1\}} \cup \Delta^{\{0,3\}}, \flat, \flat)
      \arrow[r]
      \arrow[d, hook, swap, "b"]
      & \ICCat
      \\
      (\Delta^{\{0,1,3\}}, \flat, \flat)
      \arrow[ur, dashed]
    \end{tikzcd}
  \end{equation*}
  which is left Kan. However, the existence of such lifts is precisely the condition that for any functor between spaces $f\colon X \to Y$, and any functor $\mathcal{F}\colon X \to \category{C}$, the left Kan extension $f_{!}\mathcal{F}$ exists. This is true by our assumption that $\category{C}$ be cocomplete.
\end{proof}

\begin{lemma}
  \label{lemma:map_u_is_equivalence}
  The map $v_{1}$ can be written as the composition
  \begin{equation*}
    v_{1} = (\Delta^{\{0,1,3\}}, \flat, \flat) \overset{v_{1}''}{\hookrightarrow} (\Delta^{\{0,1,3\}} \cup \Delta^{\{2,3\}}, \heartsuit, \flat) \overset{v_{1}'}{\hookrightarrow} (\Delta^{3}, \heartsuit, \dagger),
  \end{equation*}
  each of which is marked-scaled anodyne.
\end{lemma}
\begin{proof}
  The morphism $v_{1}''$ is a pushout along a morphism of type \ref{item:outerms}. We construct the morphism $v_{1}'$ in the following way.
  \begin{enumerate}
    \item Then we fill the simplex $\Delta^{\{1,2,3\}}$ (together with its marking and scaling) as a pushout along a morphism of type \ref{item:outerms}.

    \item Then we fill the simplex $\Delta^{\{0,1,2\}}$ (together with its marking and scaling) as a pushout along a morphism of type \ref{item:innerms}.

    \item Finally, we fill the full simplex $\Delta^{3}$ (together with its marking and scaling) as a pushout along a morphism of type \ref{item:innerms}.
  \end{enumerate}
\end{proof}

We have thus shown that, should the left Kan edges really turn out to be precisely the $p$-cocartesian edges, then $p$ is a cocartesian fibration. However, it remains to be verified that left Kan edges really are precisely the same as cocartesian edges. We first show one implication: that if an edge is left Kan, it is cocartesian.

In order to show that all left Kan edges are cocartesian, we have to show that lifting problems
\begin{equation*}
  \begin{tikzcd}
    (\Lambda^{n}_{0})^{\mathcal{L}}
    \arrow[r]
    \arrow[d, hook]
    & \LS(\category{C})^{\clubsuit}
    \arrow[d]
    \\
    (\Delta^{n})^{\mathcal{L}}
    \arrow[r]
    \arrow[ur, dashed]
    & \S^{\sharp}
  \end{tikzcd},\qquad n \geq 2,
\end{equation*}
have solutions.\footnote{Note that the case $n=1$ corresponds to the condition that cocartesian lifts exist, proved above.} Unravelling the definitions, we find that these are adjunct to the lifting problems
\begin{equation}
  \label{eq:challenging_filling_problem}
  \begin{tikzcd}
    K^{n}_{\dagger}
    \arrow[d, hook]
    \arrow[r, "\tau'"]
    & \ICCat
    \\
    \Delta^{2n+1}_{\dagger}
    \arrow[ur, dashed, swap, "\tau"]
  \end{tikzcd},
\end{equation}
where:
\begin{itemize}
  \item $K^{n}$ is the simplicial subset of $\Delta^{n}$ on those simplices $\sigma\colon \Delta^{k} \to K^{n}$ which satisfy at least one of the following conditions.
    \begin{enumerate}
      \item The $k$-simplex $\sigma$ factors through the `top face' $\Delta^{n} \subset \Delta^{2n+1} \cong \Delta^{n} \star (\Delta^{n})\op$.

      \item The $k$-simplex $\sigma$ factors through the `bottom face' $(\Delta^{n})\op \subset \Delta^{2n+1} \cong \Delta^{n} \star (\Delta^{n})\op$.

      \item There exists $\ell \neq 0$ such that the $k$-simplex $\sigma$ contains neither $\Delta^{\{\ell\}}$ nor $\Delta^{\{\overline{\ell}\}}$.
    \end{enumerate}


  \item The filler $\tau$ is left Kan. (This implies in particular that the map $\tau'$ fulfills all conditions to be left Kan which apply to the scaled simplicial subset $K^{n}_{\dagger}$.)
\end{itemize}

It is actually easier to solve these lifting problems by generalizing them somewhat. Recall that any left Kan simplex $\tau\colon \Delta^{2n+1}_{\dagger} \to \ICCat$ is in particular admissible, and thus has the property that the restriction $\tau|\Delta^{\{n+1, \ldots, 2n+1\}}$ is the constant functor with value $\category{C}$. We will relax this requirement, demanding only that each morphism in $\Delta^{\{n+1, \ldots, 2n+1\}}$ be mapped to an equivalence. We can guarantee this by introducing a marking, in addition to the scaling. We can do this using the theory of marked-scaled simplicial sets, as developed in \cite{garcia20212}.

\begin{notation}
  \leavevmode
  \begin{enumerate}
    \item Denote by $\natural$ the marking on $\ICCat$ containing all equivalences. Denote $\ICCat$ together with this marking by $\ICCat^{\natural}$. Thus, $\ICCat^{\natural}$ is a marked-scaled simplicial set, where a triangle is scaled if and only if it commutes up to a specified homotopy.

    \item Denote by $\heartsuit$ the marking on $\Delta^{2n+1}$ containing all $1$-simplices in the `bottom face' $(\Delta^{n})\op = \Delta^{\{n+1, \ldots, 2n+1\}} \subset \Delta^{2n+1}$. Denote the marked-scaled simplicial set with this marking and the $\dagger$ scaling by $(\Delta^{2n+1})^{\heartsuit}_{\dagger}$.

    \item For any simplicial subset $S \subseteq \Delta^{2n+1}$, we will denote the restrictions of $\dagger$ and $\heartsuit$ to $S$ also by $\dagger$ and $\heartsuit$ respectively.
  \end{enumerate}
\end{notation}

\begin{definition}
  \label{def:weakly_left_kan}
  We will call a map $\sigma\colon (\Delta^{2n+1})^{\heartsuit}_{\dagger} \to \ICCat^{\natural}$ \defn{weakly left Kan} if it satisfies the following conditions.
  \begin{itemize}
    \item The objects $\sigma(\Delta^{0})$, \dots, $\sigma(\Delta^{n}) \in \ICCat$ are spaces.

    \item The image of the simplex $(\Delta^{\{0, 1, \overline{0}\}})^{\flat}_{\flat} \subset (\Delta^{2n+1})^{\heartsuit}_{\dagger}$ is left Kan.
  \end{itemize}
\end{definition}


We note that there is a pullback diagram of marked-scaled simplicial subsets of $\Delta^{2n+1}$
\begin{equation}
  \label{eq:simplification_of_lifting_problem}
  \begin{tikzcd}
    (\Lambda^{\{0, \ldots, n, \overline{0}\}}_{0})^{\heartsuit}_{\dagger}
    \arrow[r, hook, "u_{n}"]
    \arrow[d, hook]
    & (K^{n})^{\heartsuit}_{\dagger}
    \arrow[d, hook]
    \\
    (\Delta^{\{0, \ldots, n, \overline{0}\}})^{\heartsuit}_{\dagger}
    \arrow[r, hook, "v_{n}"]
    & (\Delta^{2n+1})^{\heartsuit}_{\dagger}
  \end{tikzcd}.
\end{equation}

\begin{lemma}
  \label{lemma:lower_morphism_equivalence}
  For all $n \geq 2$, the map $v_{n}$ is marked-scaled anodyne, hence a weak equivalence.
\end{lemma}
\begin{proof}
  In this proof, all simplicial subsets of $\Delta^{2n+1}$ will be assumed to carry the marking $\heartsuit$ and the scaling $\dagger$.

  We can write each $v_{n}$ as a composition
  \begin{equation*}
    \Delta^{\{0, \ldots, n, \overline{0}\}} \overset{v''_{n}}{\hookrightarrow} \Delta^{\{0, \ldots, n, \overline{0}\}} \cup \Delta^{\{\overline{n}, \ldots, \overline{0}\}} \overset{v'_{n}}{\hookrightarrow} \Delta^{2n+1}.
  \end{equation*}
  Simply put, $v_{n}''$ is a pushout along the inclusion $(\Delta^{\{n\}})^{\sharp}_{\sharp} \hookrightarrow (\Delta^{n})^{\sharp}_{\sharp}$, which is marked-scaled anodyne.

  It remains to show that the for each $n \geq 2$, $v_{n}'$ is marked-scaled anodyne. We actually prove that this result holds for all $n \geq 1$. First, we introduce some notation.

  Let $M^{n}_{0} = \Delta^{\{0, \ldots, n, \overline{0}\}} \cup \Delta^{\{\overline{n}, \ldots \overline{0}\}} \subset \Delta^{2n+1}$, and for $1 \leq k \leq n$, define
  \begin{equation*}
    M^{n}_{k} := M^{n}_{0} \cup \left(\bigcup_{\ell = 1}^{k} \Delta^{[2n+1] \smallsetminus \{\ell, \overline{\ell}\}}\right).
  \end{equation*}
  There is an obvious filtration
  \begin{equation}
    \label{eq:filtration_by_adding_sides}
    M^{n}_{0} \overset{i^{n}_{0}}{\hookrightarrow} M^{n}_{1} \overset{i^{n}_{1}}{\hookrightarrow} \cdots \overset{i^{n}_{n-1}}{\hookrightarrow} M^{n}_{n} \overset{i^{n}_{n}}{\hookrightarrow} \Delta^{2n+1}.
  \end{equation}

  Define
  \begin{equation*}
    j^{n}_{k} := i^{n}_{n} \circ \cdots \circ i^{n}_{k}\colon M^{n}_{k} \hookrightarrow \Delta^{2n+1},\qquad 0 \leq k \leq n.
  \end{equation*}
  In particular, note that $j^{n}_{0} = v_{n}'$.

  We aim to show that each $i^{n}_{k}$ is marked-scaled anodyne for each $n \geq 1$ and $0 \leq i \leq n$. We proceed by induction on $n$. For our base case, we take $n=1$, where we have the filtration
  \begin{equation*}
    M^{n}_{0} \overset{i^{1}_{0}}{=} M^{n}_{1} \overset{i^{1}_{1}}{\hookrightarrow} \Delta^{3}.
  \end{equation*}

  Equalities are certainly marked-scaled anodyne, and the map $i^{1}_{1}$ was proven in \hyperref[lemma:map_u_is_equivalence]{Lemma~\ref*{lemma:map_u_is_equivalence}} to be marked-scaled anodyne (it coincides with the map $v'_{1}$). Thus, the maps $i^{1}_{0}$ and $i^{1}_{1}$ are marked-scaled anodyne; the result holds for $n = 1$.

  We now suppose that the result holds true for $n-1$; that is, that the maps $i^{n-1}_{k}$ are marked-scaled anodyne for all $0 \leq k \leq n-1$. We need to show that each of the maps $i^{n}_{k}$ are marked-scaled anodyne. 

  For $0 \leq k < n$, we can write $i^{n}_{k}$ as the inclusion
  \begin{equation*}
    \S^{\mathcal{A}}_{[2n+1]} \hookrightarrow \S^{\mathcal{A}}_{[2n+1]} \cup \Delta^{[2n+1] \smallsetminus \{i, \overline{i}\}},\qquad \mathcal{A}
    = \left\{ \substack{ \{\overline{n}, \ldots, \overline{1}\} \\ \{0, \ldots n\} \\ \{1, \overline{1}\} \\ \vdots \\ \{k-1, \overline{k-1}\} } \right\}.
  \end{equation*}
  By \hyperref[lemma:bicartesian_square]{Lemma~\ref*{lemma:bicartesian_square}}, we have a pushout square
  \begin{equation*}
    \begin{tikzcd}
      \S^{\mathcal{A}|([2n+1] \smallsetminus \{k, \overline{k}\})}_{[2n+1] \smallsetminus \{k, \overline{k}\}}
      \arrow[r, hook]
      \arrow[d, hook]
      & \Delta^{[2n+1] \smallsetminus \{k, \overline{k}\}}
      \arrow[d, hook]
      \\
      \S^{\mathcal{A}}_{[2n+1]}
      \arrow[r, hook]
      & \S^{\mathcal{A}}_{[2n+1]} \cup \Delta^{[2n+1] \smallsetminus \{k, \overline{k}\}}.
    \end{tikzcd}.
  \end{equation*}
  Therefore, it suffices to show that the top morphism is marked-scaled anodyne. One checks that this map is of the form $j^{n-1}_{k}$, and is thus marked-scaled anodyne. Therefore, it remains only to show that $i^{n}_{n}$ is marked-scaled anodyne.

  We can write $i^{n}_{n}\colon M^{n}_{n} \hookrightarrow \Delta^{2n+1}$ as a simplicial inclusion
  \begin{equation*}
    \S^{\mathcal{A}}_{[2n+1]} \subseteq \Delta^{2n+1},\qquad \mathcal{A} = \left\{ \substack{ \{\overline{n}, \ldots, \overline{1}\} \\ \{0, \ldots n\} \\ \{1, \overline{1}\} \\ \vdots \\ \{n, \overline{n}\} } \right\}.
  \end{equation*}

  We will express this inclusion as the following composition of fillings:
  \begin{enumerate}
    \item We first add the simplices $\Delta^{\{n, \overline{n}, \ldots, \overline{0}\}}$, $\Delta^{\{n-1, n, \overline{n}, \ldots, \overline{0}\}}$, \dots, $\Delta^{\{2, \ldots, n, \overline{n}, \ldots, \overline{0}\}}$.

    \item We next add $\Delta^{\{1, \ldots, n, \overline{n}, \overline{0}\}}$, $\Delta^{\{1, \ldots, n, \overline{n}, \overline{n-1}, \overline{0}\}}$, \dots, $\Delta^{\{1, \ldots, n, \overline{n}, \ldots, \overline{2}, \overline{0}\}}$
      
    \item We next add $\Delta^{\{1, \ldots n, \overline{n}, \ldots, \overline{0}\}}$.

    \item We then add $\Delta^{\{0, \ldots, n, \overline{n}, \overline{0}\}}$, $\Delta^{\{0, \ldots, n, \overline{n}, \overline{n-1}, \overline{0}\}}$, \dots, $\Delta^{\{0, \ldots n, \overline{n}, \ldots, \overline{0}\}}$.
  \end{enumerate}
  We proceed.
  \begin{enumerate}
    \item 
      \begin{itemize}
        \item Using \hyperref[lemma:bicartesian_square]{Lemma~\ref*{lemma:bicartesian_square}}, we see that the square
          \begin{equation*}
            \begin{tikzcd}
              \S^{\mathcal{A}|\{n, \overline{n}, \ldots, \overline{0}\}}_{\{n, \overline{n}, \ldots, \overline{0}\}}
              \arrow[r, hook]
              \arrow[d, hook]
              & \Delta^{\{n, \overline{n}, \ldots, \overline{0}\}}
              \arrow[d, hook]
              \\
              \S^{\mathcal{A}}_{[2n+1]}
              \arrow[r, hook]
              & \S^{\mathcal{A}}_{[2n+1]} \cup \Delta^{\{n, \overline{n}, \ldots, \overline{0}\}}
            \end{tikzcd}
          \end{equation*}
          is pushout. In order to show that the bottom inclusion is marked-scaled anodyne, it thus suffices to show that the top inclusion is marked-scaled anodyne. We have
          \begin{equation*}
            \begin{tikzcd}
              \mathcal{A}|\{n, \overline{n}, \ldots, \overline{0}\} 
              = \left\{ \substack{ \{\overline{n}, \ldots, \overline{1}\} \\ \{n\} \\ \{\overline{1}\} \\ \vdots \\ \{\overline{n-1}\} \\ \{n, \overline{n}\} } \right\}
              \sim \left\{ \substack{ \{n\} \\ \{\overline{n-1}\} \\ \vdots \\ \{\overline{1}\} } \right\} =: \mathcal{A}'
            \end{tikzcd}.
          \end{equation*}
          This is a dull subset of $\{n, \overline{n}, \ldots, \overline{0}\}$ with pivot $\overline{n}$. The only $\mathcal{A}'$-basal set is $\{n, \overline{n-1}, \ldots, \overline{1}\}$. One checks that $\mathcal{A}'$, together with the marking $\heartsuit$ and scaling $\dagger$, satisfies the conditions of the \hyperref[lemma:pivot_trick]{Pivot~Trick}:
          \begin{itemize}
            \item For $n = 2$, the only the marked edge not containing the pivot $\overline{2}$ is $\overline{1} \to \overline{0}$, which belongs to $\S^{\mathcal{A}'}_{\{n, \overline{n}, \ldots, \overline{0}\}}$. The only scaled simplex which does not contain $\overline{2}$, and which does not factor through $\S^{\mathcal{A}'}$, is $\sigma = \{2 < \overline{1} < \overline{0}\}$. The simplex $\sigma \cup \{\overline{2}\}$ is fully scaled.

            \item For $n = 3$, each marked edge is contained in $\S^{\mathcal{A}'}$. The only scaled triangle which does not contain the pivot $\overline{3}$, and which does not factor through $\S^{\mathcal{A}'}$, is $\sigma = \{3 < \overline{2} < \overline{1}\}$. The simplex $\sigma \cup \{\overline{3}\}$ is fully scaled.

            \item For $n \geq 4$, all scaled and marked simplices belong to $\S^{\mathcal{A}'}$ by \hyperref[lemma:subset_of_simplex_contains_k_simplices]{Lemma~\ref*{lemma:subset_of_simplex_contains_k_simplices}}.
          \end{itemize}
          In each case, the simplex $\{n, \overline{n}, \overline{n-1}\}$ is scaled, so the top inclusion is marked-scaled anodyne by the \hyperref[lemma:pivot_trick]{Pivot Trick}. We can write
          \begin{equation*}
            \S^{\mathcal{A}}_{[2n+1]} \cup \Delta^{\{n, \overline{n}, \ldots, \overline{0}\}} = \S^{\mathcal{A} \cup ([2n+1] \smallsetminus \{n, \overline{n}, \ldots, \overline{0}\})}_{[2n+1]},
          \end{equation*}
          We see that
          \begin{equation*}
            \mathcal{A} \cup ([2n+1] \smallsetminus \{n, \overline{n}, \ldots, \overline{0}\}) \sim \left\{ \substack{ \{\overline{n}, \ldots, \overline{1}\} \\ \{0, \ldots n-1\} \\ \{1, \overline{1}\} \\ \vdots \\ \{n, \overline{n}\} } \right\},
          \end{equation*}
          which we denote by $\mathcal{A}_{n-1}$.

        \item We proceed inductively. Suppose we have added the simplices $\Delta^{\{n, \overline{n}, \ldots, \overline{0}\}}$, $\Delta^{\{n-1, n, \overline{n}, \ldots, \overline{0}\}}$, \dots, $\Delta^{\{k+1, \ldots, n, \overline{n}, \ldots, \overline{0}\}}$, for $2 \leq k \leq n-1$. Using \hyperref[lemma:add_a_simplex]{Lemma~\ref*{lemma:add_a_simplex}} and \hyperref[lemma:replace_poset_by_minimal_elements]{Lemma~\ref*{lemma:replace_poset_by_minimal_elements}} can write the result of these additions as
          \begin{equation*}
            \S^{\mathcal{A}}_{[2n+1]} \cup \left( \bigcup_{i = k+1}^{n} \Delta^{\{i, \ldots, n, \overline{n}, \ldots, \overline{0}\}}\right) = \S^{\mathcal{A}_{k+1}}_{[2n+1]},
          \end{equation*}
          where 
          \begin{equation*}
            \mathcal{A}_{k+1} = \left\{ \substack{ \{\overline{n}, \ldots, \overline{1}\} \\ \{0, \ldots, k\} \\ \{1, \overline{1}\} \\ \vdots \\ \{n, \overline{n}\} } \right\}.
          \end{equation*}

          Using \hyperref[lemma:bicartesian_square]{Lemma~\ref*{lemma:bicartesian_square}}, we see that the square
          \begin{equation*}
            \begin{tikzcd}
              \S^{\mathcal{A}_{k+1}|\{k, \ldots, n, \overline{n}, \ldots, \overline{0}\}}_{\{k, \ldots, n, \overline{n}, \ldots, \overline{0}\}}
              \arrow[r, hook]
              \arrow[d, hook]
              & \Delta^{\{k, \ldots, n, \overline{n}, \ldots, \overline{0}\}}
              \arrow[d, hook]
              \\
              \S^{\mathcal{A}_{k+1}}_{[2n+1]}
              \arrow[r, hook]
              & \S^{\mathcal{A}_{k+1}}_{[2n+1]} \cup \Delta^{\{k, \ldots, n, \overline{n}, \ldots, \overline{0}\}}
            \end{tikzcd}
          \end{equation*}
          is pushout, so in order to show that the bottom morphism is marked-scaled anodyne, it suffices to show that the top morphism is. We see that
          \begin{equation*}
            \mathcal{A}_{k+1}|\{k, \ldots, n, \overline{n}, \ldots, \overline{0}\} =
            \left\{ \substack{ \{\overline{n}, \ldots, \overline{1}\} \\ \{k\} \\ \{\overline{1}\} \\ \vdots \\ \{\overline{k-1}\} \\ \{k, \overline{k}\} \\ \vdots \\ \{n, \overline{n}\} } \right\}
            \sim \left\{ \substack{ \{k\} \\ \{\overline{1}\} \\ \vdots \\ \{\overline{k-1}\} \\ \{k+1, \overline{k+1}\} \\ \vdots \\ \{n, \overline{n}\} } \right\} =: \mathcal{A}_{k+1}'.
          \end{equation*}

          This is a dull subset of $P(\{k, \ldots, n, \overline{n}, \ldots, \overline{0}\})$ with pivot $\overline{k}$, and one checks that the conditions of the \hyperref[lemma:pivot_trick]{Pivot Trick} are satisfied: 
          \begin{itemize}
            \item For $n = 3$, where the only value of $k$ is $k = 2$, each marked edge is contained in $\S^{\mathcal{A}_{k+1}'}$ by \hyperref[lemma:subset_of_simplex_contains_k_simplices]{Lemma~\ref*{lemma:subset_of_simplex_contains_k_simplices}}, and one can check that each scaled triangle factors through $\S^{\mathcal{A}_{k+1}'}$.

            \item For $n \geq 4$, all scaled and marked simplices belong to $\S^{\mathcal{A}'}$ by \hyperref[lemma:subset_of_simplex_contains_k_simplices]{Lemma~\ref*{lemma:subset_of_simplex_contains_k_simplices}}.
          \end{itemize}
          The basal sets are of the form
          \begin{equation*}
            \{k, a_{1}, \ldots, a_{n-k}, \overline{k-1}, \ldots, \overline{1}\},
          \end{equation*}
          where each $a_{1}$, \dots, $a_{n-k}$ is of the form $\ell$ or $\overline{\ell}$ for $k+1 \leq \ell \leq n$. In each case, the simplex $\{a_{n-k}, \overline{k}, \overline{k-1}\}$ is scaled. Thus, the conditions of the \hyperref[lemma:pivot_trick]{Pivot Trick}, the top morphism is marked-scaled anodyne.
      \end{itemize}

      We have now added the simplices promised in part 1., and are left with the simplicial subset $\S^{\mathcal{A}_{2}}_{[2n+1]}$, where
      \begin{equation*}
        \mathcal{A}_{2}
        = \left\{ \substack{ \{\overline{n}, \ldots, \overline{1}\} \\ \{0, 1\} \\ \{1, \overline{1}\} \\ \vdots \\ \{n, \overline{n}\} } \right\}.
      \end{equation*}

    \item Each step in this sequence is solved exactly like those above. The calculations are omitted. The end result is the simplicial subset
      
  \end{enumerate}
\end{proof}

\begin{lemma}
  \label{lemma:upper_morphism_equivalence}
  For all $n \geq 2$, the map $u_{n}$ is marked-scaled anodyne, hence a weak equivalence.
\end{lemma}
\begin{proof}
  We begin with a few definitions.
  \begin{itemize}
    \item For each $n \geq 2$, denote by $P_{n}$ the poset of strict subsets of $[n]$ which contain $0$. Note that
      \begin{equation*}
        \Lambda^{n}_{0} \cong \colim_{S \in P_{n}} \Delta^{S}.
      \end{equation*}

    \item We define a cosimplicial object $J\colon \Delta \to \SSetms$ sending
      \begin{equation*}
        [n] \mapsto (\Delta^{n} \star \Delta^{\{\overline{0}\}})^{\heartsuit}_{\dagger}.
      \end{equation*}
      Denote the extension of this functor by colimits by
      \begin{equation*}
        \hat{J}\colon \SSet \to \SSetms.
      \end{equation*}
      Note that the inclusions $\Delta^{n} \amalg \Delta^{\{\overline{0}\}} \hookrightarrow \Delta^{n} \star (\Delta^{n})\op$ give, for any simplicial set $K$, a map
      \begin{equation*}
        K^{\flat}_{\sharp} \amalg \Delta^{\{\overline{0}\}} \to \hat{J}(K).
      \end{equation*}

      We can write
      \begin{equation*}
        (\Lambda^{\{0, \ldots, n, \overline{0}\}}_{0})^{\heartsuit}_{\dagger} \cong \hat{J}(\Lambda^{n}_{0}) \amalg_{(\Lambda^{n}_{0})^{\sharp}_{\flat}} (\Delta^{n})^{\sharp}_{\flat}.
      \end{equation*}

    \item We define a cosimplicial object $Q\colon \Delta \to \SSetms$ sending
      \begin{equation*}
        [n] \mapsto (\Delta^{n} \star (\Delta^{n})\op)^{\heartsuit}_{\dagger}.
      \end{equation*}
      Denote the extension of this functor by colimits by
      \begin{equation*}
        \hat{Q}\colon \SSet \to \SSetms.
      \end{equation*}
      Note that the inclusions
      \begin{equation*}
        \Delta^{n} \amalg (\Delta^{n})\op \hookrightarrow \Delta^{n} \star (\Delta^{n})\op
      \end{equation*}
      gives, for any simplicial set $K$, a map
      \begin{equation*}
        Q^{\flat}_{\sharp} \amalg (Q\op)^{\sharp}_{\sharp} \hookrightarrow \hat{Q}(K).
      \end{equation*}
      We can write
      \begin{equation*}
        (K^{n})^{\heartsuit}_{\dagger} \cong \hat{Q}(\Lambda^{n}_{0}) \amalg_{(\Lambda^{n}_{0})^{\flat}_{\sharp} \amalg ((\Lambda^{n}_{0})\op)^{\sharp}_{\sharp}} (\Delta^{n})^{\flat}_{\sharp} \amalg ((\Delta^{n})\op)^{\sharp}_{\sharp}.
      \end{equation*}

    \item Denote by $\mathring{\Delta}$ the subcategory of $\Delta$ on morphisms $[m] \to [n]$ which send $0 \mapsto 0$. Denote by $I$ the inclusion $\mathring{\Delta} \hookrightarrow \Delta$.

    \item Denote by $v$ the natural transformation
      \begin{equation*}
        \begin{tikzcd}[column sep=huge]
          \mathring{\Delta}
          \arrow[r, bend left, "J \circ I", ""{name=U, below}]
          \arrow[r, bend right, "Q \circ I"{swap}, ""{name=D, above}]
          & \SSetms
          \arrow[from=U, to=D, Rightarrow, "v"]
        \end{tikzcd}
      \end{equation*}
      with components
      \begin{equation*}
        v_{n}\colon J(n) \to Q(n)
      \end{equation*}
      given by the obvious inclusions.\footnote{The maps $v_{n}$ are not the components of a natural transformation of functors $\Delta \to \SSetmk$; the naturality squares corresponding to morphisms which do not fix zero do not commute.}
  \end{itemize}
  In the remainder of this proof, all simplicial subsets of $\Delta^{2n+1}$ will carry the $\heartsuit$ marking and the $\dagger$ scaling. 


  Denote by $S^{n}$ the colimit of the upper composition above, and by $T^{n}$ the colimit of the lower composition.
  \begin{equation*}
    \begin{tikzcd}
      P^{n}
      \arrow[r]
      & \mathring{\Delta}
      \arrow[r, bend left, "J \circ I"]
      \arrow[r, bend right, swap, "Q \circ I"]
      & \SSetms
    \end{tikzcd}
  \end{equation*}
  Since the cofibrations of the marked-scaled model structure are precisely those morphisms of marked-scaled simplicial sets whose underlying morphisms of simplicial sets are monomorphisms, the strict colimit of each of these diagrams is a model for the homotopy colimit. We showed in \hyperref[lemma:lower_morphism_equivalence]{Lemma~\ref*{lemma:lower_morphism_equivalence}} that each of the components of the natural transformation $v\colon J \circ I \to Q \circ I$ is a weak equivalence in the model structure on $\SSetms$. Therefore, this natural transformation furnishes a map between the colimits  

  We can write the inclusion $u_{n}\colon \Lambda^{\{0, \ldots, n, \overline{0}\}}_{0} \hookrightarrow K^{n}$ as the map between the colimits induced by the diagrams
  \begin{equation*}
    \Delta^{n} \amalg_{\Lambda^{n}_{0}} L^{n} \amalg_{(\Lambda^{n}_{0})\op} (\Delta^{n})\op
  \end{equation*}
\end{proof}



We have just shown that left Kan morphisms $\Delta^{1} \to \LS(\category{C})$ are $p$-cocartesian, and that enough left Kan lifts exist. It remains only to show that any $p$-cocartesian lift is left Kan. We use the fact that any two $p$-cocartesian lifts of a morphism with a specified source are equivalent.


\end{document}
